(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{100:function(e,t,r){},225:function(e,t,r){},226:function(e,t,r){},227:function(e,t,r){},228:function(e,t,r){},229:function(e,t,r){},230:function(e,t,r){},231:function(e,t,r){},232:function(e,t,r){},233:function(e,t,r){},234:function(e,t,r){},235:function(e,t,r){},236:function(e,t,r){},237:function(e,t,r){},238:function(e,t,r){},248:function(e,t,r){"use strict";r.r(t);var n=r(1),a=r.n(n),s=r(29),c=r.n(s),i=(r(99),r(54),r(6)),A=(r(100),r(2)),g=r(14),l=r(3),o=r.n(l),u=r(5),d=r(91),j=r.n(d).a.create({baseURL:"http://ec2-3-21-19-104.us-east-2.compute.amazonaws.com/api"});j.interceptors.response.use((function(e){return e.config.url.startsWith("/auth/signin")&&localStorage.setItem("TOKEN",e.data.accessToken),e}),(function(e){return 401===e.response.status&&localStorage.removeItem("TOKEN"),Promise.reject(e)})),j.interceptors.request.use((function(e){return console.log("config: ",e),e.url.startsWith("/auth")||(e.headers={"x-access-token":localStorage.getItem("TOKEN")||""}),e}),(function(e){return Promise.reject(e)}));var b=function(){var e=Object(u.a)(o.a.mark((function e(t){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j.post("/auth/signin",t);case 3:return r=e.sent,e.abrupt("return",r.data);case 7:throw e.prev=7,e.t0=e.catch(0),new Error(e.t0.response.data.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),C=Object(g.b)({name:"auth",initialState:{error:null,currentUser:null},reducers:{setError:function(e,t){var r=t.payload;e.error=r.error},clearError:function(e){e.error=null},setCurrentUser:function(e,t){var r=t.payload;e.currentUser=r.currentUser},removeCurrentUser:function(e){e.currentUser=null}}}),I=C.reducer,m=C.actions,p=m.setError,x=(m.clearError,m.setCurrentUser),O=m.removeCurrentUser,v=function(e){return e.auth.error},h=function(){return JSON.parse(localStorage.getItem("USER_ID"))||null},f=Object(g.b)({name:"app",initialState:{isLoading:!1,isAuth:!1},reducers:{startLoading:function(e){e.isLoading=!0},stopLoading:function(e){e.isLoading=!1},authSuccess:function(e){e.isAuth=null!==localStorage.getItem("TOKEN")},logout:function(e,t){var r=t.payload;e.isAuth=r.isAuth}}}),N=f.reducer,y=f.actions,w=y.startLoading,k=y.stopLoading,L=y.authSuccess,U=y.logout,S=function(e){return e.app.isLoading},V=function(e){return e.app.isAuth},E=r(8),z=function(){var e=Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j.get("/users");case 3:return t=e.sent,e.abrupt("return",t.data);case 7:throw e.prev=7,e.t0=e.catch(0),new Error(e.t0.response.data.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),T=function(){var e=Object(u.a)(o.a.mark((function e(t){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j.post("/auth/signup",t);case 3:return r=e.sent,e.abrupt("return",r.data);case 7:throw e.prev=7,e.t0=e.catch(0),new Error(e.t0.response.data.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=Object(u.a)(o.a.mark((function e(t,r){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j.put("/users/".concat(t),r);case 3:return n=e.sent,e.abrupt("return",n.data);case 7:throw e.prev=7,e.t0=e.catch(0),new Error(e.t0.response.data.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,r){return e.apply(this,arguments)}}(),F=Object(g.b)({name:"user",initialState:{users:[],error:null,isUpdated:!1},reducers:{setUsers:function(e,t){var r=t.payload;e.users=r.users},addUser:function(e,t){var r=t.payload;e.users.push(r)},setError:function(e,t){var r=t.payload;e.error=r.error},setIsUpdated:function(e,t){var r=t.payload;e.isUpdated=r.isUpdated}}}),R=F.reducer,M=F.actions,G=M.setUsers,W=M.addUser,K=(M.addNewValueToUser,M.setError),Z=M.setIsUpdated,X=function(e){return e.user.users},Y=function(e){return e.user.error},q=function(e){return e.user.isUpdated},J=function(){return function(){var e=Object(u.a)(o.a.mark((function e(t){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(K({error:null})),t(w()),e.prev=2,e.next=5,z();case 5:r=e.sent,t(G({users:r})),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),t(K({error:e.t0.message})),console.log(e.t0.message);case 13:return e.prev=13,t(k()),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[2,9,13,16]])})));return function(t){return e.apply(this,arguments)}}()},P=function(e,t){return function(){var r=Object(u.a)(o.a.mark((function r(n){return o.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n(K({error:null})),n(w()),n(Z({isUpdated:!1})),r.prev=3,r.next=6,B(e,t);case 6:r.next=11;break;case 8:r.prev=8,r.t0=r.catch(3),n(K({error:r.t0.message}));case 11:return r.prev=11,n(k()),n(Z({isUpdated:!0})),r.finish(11);case 15:case"end":return r.stop()}}),r,null,[[3,8,11,15]])})));return function(e){return r.apply(this,arguments)}}()},D=function(e,t){return e.find((function(e){return e._id===t}))},H=r(0);function Q(){var e=Object(A.c)(V),t=Object(A.b)(),r=h();Object(n.useEffect)((function(){t(J())}),[t]);var a=Object(A.c)(X),s=D(a,r);return console.log("auth: ",e),Object(H.jsx)("div",{id:"wrapper-header",children:Object(H.jsxs)("div",{className:"header",children:[Object(H.jsx)(i.b,{to:"/",children:Object(H.jsxs)("div",{id:"logo",children:[Object(H.jsx)("div",{id:"logo-circle-1"}),Object(H.jsx)("div",{id:"logo-circle-2"})]})}),0===a.length?Object(H.jsx)("div",{}):e?Object(H.jsxs)(H.Fragment,{children:[Object(H.jsxs)("ul",{className:"nav-top",children:[Object(H.jsx)(i.b,{className:"nav-top-li",to:"/user/".concat(r,"/me"),children:Object(H.jsx)("div",{id:"nav-top-me",style:{background:"url(".concat(s.img,") no-repeat center"),backgroundSize:"cover"}})}),Object(H.jsx)("li",{children:Object(H.jsx)(i.b,{className:"nav-top-li",to:"/users",children:"Find a partner"})}),Object(H.jsx)("li",{children:Object(H.jsx)(i.b,{className:"nav-top-li",to:"/blog",children:"Blog"})})]}),Object(H.jsx)("div",{className:"text-end",children:Object(H.jsx)(i.b,{className:"nav-top-li",to:"/",onClick:function(){return t((function(e){localStorage.removeItem("USER_ID"),localStorage.removeItem("TOKEN"),e(O()),e(U({isAuth:!1}))}))},children:"Logout"})})]}):Object(H.jsxs)(H.Fragment,{children:[Object(H.jsxs)("ul",{className:"nav-top",children:[Object(H.jsx)("li",{children:Object(H.jsx)(i.b,{className:"nav-top-li",to:"/users",children:"Find a partner"})}),Object(H.jsx)("li",{children:Object(H.jsx)(i.b,{className:"nav-top-li",to:"/blog",children:"Blog"})})]}),Object(H.jsx)("div",{className:"text-end",children:Object(H.jsx)(i.b,{className:"nav-top-li",to:"/auth/login",children:"Login"})})]})]})})}var _=r(4),$=r(9),ee=r(7),te=r(16),re=r(21),ne=(r(225),function(e){var t=e.text;return Object(H.jsx)("div",{id:"box-error",children:Object(H.jsx)("p",{id:"text-error",children:t})})}),ae=(r(28),["name","label","error","type","className"]);var se=function(e){var t=e.name,r=e.label,n=e.error,a=e.type,s=e.className,c=Object(re.a)(e,ae);return Object(H.jsxs)("div",{className:s,children:[Object(H.jsx)("div",{children:Object(H.jsx)("input",Object(E.a)({className:"width-100",type:a,name:t},c))}),Object(H.jsx)("div",{className:"lb-reg",children:Object(H.jsxs)("label",{htmlFor:t,children:[" ",r]})}),n&&Object(H.jsx)(ne,{text:n})]})},ce=["label","name","options","error"];var ie=function(e){var t=e.label,r=e.name,n=e.options,a=e.error,s=Object(re.a)(e,ce);return Object(H.jsxs)("div",{children:[Object(H.jsx)("div",{children:Object(H.jsx)("select",Object(E.a)(Object(E.a)({className:"width-100",id:r,name:r},s),{},{children:n.map((function(e){return null===e.value?Object(H.jsx)("option",{value:e.value,disabled:!0,children:e.key}):Object(H.jsx)("option",{value:e.value,placeholder:"options",children:e.key})}))}))}),Object(H.jsx)("div",{className:"lb-reg",children:Object(H.jsx)("label",{htmlFor:r,children:t})}),a&&Object(H.jsx)(ne,{text:a})]})},Ae=["label","name","options","error"];var ge=function(e){e.label,e.name;var t=e.options,r=e.error,n=Object(re.a)(e,Ae);return Object(H.jsxs)("div",{className:"two-columns",children:[Object(H.jsx)("div",{children:t.map((function(e){return Object(H.jsxs)("label",{className:"radio-btns text-gray",htmlFor:e.value,children:[Object(H.jsx)("input",Object(E.a)({className:"radio ",type:"radio",id:e.value,value:e.value,name:"gender"},n)),e.key]},e.key)}))}),Object(H.jsx)("div",{}),r&&Object(H.jsx)("p",{children:r})]})},le=["label","id","error","className"];var oe=function(e){var t=e.label,r=e.id,n=e.error,a=e.className,s=Object(re.a)(e,le);return Object(H.jsxs)("div",{className:a,children:[Object(H.jsx)("div",{children:Object(H.jsx)("textarea",Object(E.a)({className:"width-100 reg-textarea",id:r},s))}),Object(H.jsx)("div",{className:"lb-reg",children:Object(H.jsx)("label",{htmlFor:r,children:t})}),n&&Object(H.jsx)("p",{children:n})]})},ue=function(){var e=a.a.useState(null),t=Object($.a)(e,2),r=t[0],n=t[1],s=a.a.useState(null),c=Object($.a)(s,2),i=c[0],g=c[1],l=Object(_.g)(),d=Object(A.b)(),b=a.a.useCallback(Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(t=new FormData).append("image",r),console.log("data: ",r),e.next=6,j.post("/upload",t,{headers:{"content-type":"multipart/form-data"}}).then((function(e){return console.log("res",e),g(e.data.location)}));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),[r]),C=Object(A.c)(Y);console.log("errByAddUser: ",C);var I,m=[{key:"choose language",value:null},{key:"english",value:"english"},{key:"german",value:"german"},{key:"french",value:"french"},{key:"spanish",value:"spanish"},{key:"russian",value:"russian"},{key:"italian",value:"italian"},{key:"portuguese",value:"portuguese"}],p=ee.b({firstName:ee.d().required().min(2),lastName:ee.d().required().min(2),gender:ee.d().required(),email:ee.d().required(),password:ee.d().required(),age:ee.a(),zip:ee.d().required(),passwordConfirm:ee.d().oneOf([ee.c("password"),null],"Passwords must match"),img:ee.d(),about:ee.d(),description:ee.d(),interests:ee.d(),nativeLanguage:ee.d().required("Required"),practiceLanguage:ee.d().required("Required")}),x=Object(te.b)({defaultValues:{firstName:"",lastName:"",gender:"",email:"",password:"",passwordConfirm:"",age:null,img:"",about:"",zip:null,nativeLanguage:"",practiceLanguage:"",interests:"",description:""},validate:(I=p,function(){var e=Object(u.a)(o.a.mark((function e(t){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={},e.prev=1,e.next=4,I.validate(t,{abortEarly:!1});case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),e.t0.inner.forEach((function(e){var t=e.path,n=e.message;return Object(te.a)(r,t,n)}));case 9:return e.abrupt("return",r);case 10:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()),onSubmit:function(e,t){var r,n=t.reset;console.log("onSubmit: ",e),d((r=Object(E.a)(Object(E.a)({},e),{},{img:i}),function(){var e=Object(u.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(K({error:null})),t(w()),e.prev=2,e.next=5,T(r);case 5:n=e.sent,t(W(Object(E.a)({},n))),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),console.log("err.message: ",e.t0.message),t(K({error:e.t0.message}));case 13:return e.prev=13,t(k()),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[2,9,13,16]])})));return function(t){return e.apply(this,arguments)}}())),n(),l("/auth/login")}}),O=x.form,v=(0,x.use)("errors",{errorWithTouched:!0});return Object(H.jsx)("div",{className:"wrapper",children:Object(H.jsxs)("div",{id:"wrapper-reg",children:[Object(H.jsx)("div",{id:"box-reg-left",children:Object(H.jsxs)("div",{children:[i?Object(H.jsx)("div",{id:"avatar",style:{background:"url(".concat(i,") no-repeat center"),backgroundSize:"cover"},alt:"avatar"}):Object(H.jsx)("div",{id:"avatar",style:{background:"url(".concat("data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEBLAEsAAD/4QBWRXhpZgAATU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAAITAAMAAAABAAEAAAAAAAAAAAEsAAAAAQAAASwAAAAB/+0ALFBob3Rvc2hvcCAzLjAAOEJJTQQEAAAAAAAPHAFaAAMbJUccAQAAAgAEAP/hDIFodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvADw/eHBhY2tldCBiZWdpbj0n77u/JyBpZD0nVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkJz8+Cjx4OnhtcG1ldGEgeG1sbnM6eD0nYWRvYmU6bnM6bWV0YS8nIHg6eG1wdGs9J0ltYWdlOjpFeGlmVG9vbCAxMC4xMCc+CjxyZGY6UkRGIHhtbG5zOnJkZj0naHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyc+CgogPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9JycKICB4bWxuczp0aWZmPSdodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyc+CiAgPHRpZmY6UmVzb2x1dGlvblVuaXQ+MjwvdGlmZjpSZXNvbHV0aW9uVW5pdD4KICA8dGlmZjpYUmVzb2x1dGlvbj4zMDAvMTwvdGlmZjpYUmVzb2x1dGlvbj4KICA8dGlmZjpZUmVzb2x1dGlvbj4zMDAvMTwvdGlmZjpZUmVzb2x1dGlvbj4KIDwvcmRmOkRlc2NyaXB0aW9uPgoKIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PScnCiAgeG1sbnM6eG1wTU09J2h0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8nPgogIDx4bXBNTTpEb2N1bWVudElEPmFkb2JlOmRvY2lkOnN0b2NrOjI2ZDgyYTA4LTRlODktNGY5NC1hZTYwLWZjNGVmZWM0YTMwYjwveG1wTU06RG9jdW1lbnRJRD4KICA8eG1wTU06SW5zdGFuY2VJRD54bXAuaWlkOmYxODk4MjZlLTU5MTYtNGU1My1hM2UzLWI0MzA2MmMzYzAwNDwveG1wTU06SW5zdGFuY2VJRD4KIDwvcmRmOkRlc2NyaXB0aW9uPgo8L3JkZjpSREY+CjwveDp4bXBtZXRhPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAo8P3hwYWNrZXQgZW5kPSd3Jz8+/9sAQwADAgIDAgIDAwMDBAMDBAUIBQUEBAUKBwcGCAwKDAwLCgsLDQ4SEA0OEQ4LCxAWEBETFBUVFQwPFxgWFBgSFBUU/8AACwgA8ADwAQERAP/EAB0AAQACAgMBAQAAAAAAAAAAAAAHCAUGAQMEAgn/xAA7EAACAQMCAgYGCQMFAQAAAAAAAQIDBAUGEQcxEiFBYXGBEzJRkaGxCBQiNkJ0krLBM0OCUmJywvCT/9oACAEBAAA/AP1TAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPipVhSg5TkoRXNyeyMZW1ZhLZ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",") no-repeat center"),backgroundSize:"100%"},alt:"defaultAvatar"}),Object(H.jsx)("input",{id:"upload",type:"file",style:{display:"none"},onChange:function(e){return n(e.target.files[0])}}),Object(H.jsxs)("div",{id:"btns-upload",children:[Object(H.jsx)("input",{id:"btn-upload",value:"browse...",type:"button",onClick:function(){return document.getElementById("upload").click()},name:"img"}),Object(H.jsx)("button",{id:"btn-setAvatar",onClick:b,children:"set avatar"})]})]})}),Object(H.jsxs)("div",{className:"box-reg-right",children:[C?Object(H.jsx)(ne,{text:C}):Object(H.jsx)("div",{}),Object(H.jsx)("h4",{id:"title-reg",children:"Registration form"}),Object(H.jsxs)("form",{className:"form-registration",ref:O,method:"POST",enctype:"multipart/form-data",children:[Object(H.jsx)(ge,{id:"gender",label:"Sex",name:"gender",options:[{key:"Male",value:"m"},{key:"Female",value:"f"}],error:v.gender}),Object(H.jsx)(se,{id:"firstName",type:"text",label:"First name",name:"firstName",error:v.firstName}),Object(H.jsx)(se,{id:"lastName",type:"text",label:"Last name",name:"lastName",error:v.lastName}),Object(H.jsx)(se,{id:"email",type:"email",label:"Email",name:"email",className:"two-columns",error:v.email}),Object(H.jsx)(se,{id:"password",type:"password",label:"password",name:"password",error:v.password}),Object(H.jsx)(se,{id:"passwordConfirm",type:"password",label:"Password confirmation",name:"passwordConfirm",error:v.password}),Object(H.jsx)(se,{id:"age",type:"number",label:"Age",name:"age",error:v.age}),Object(H.jsx)(se,{id:"zip",type:"number",label:"Your ZIP(must be in Berlin)",name:"zip"}),Object(H.jsx)(ie,{label:"Your native language",name:"nativeLanguage",options:m,error:v.nativeLanguage}),Object(H.jsx)(ie,{label:"Language you want to practice",name:"practiceLanguage",options:m,error:v.practiceLanguage}),Object(H.jsx)(se,{id:"about",type:"text",label:"Short infomation",name:"about",className:"two-columns"}),Object(H.jsx)(oe,{label:"Interests",id:"interests",name:"interests",error:v.interests,className:"two-columns"}),Object(H.jsx)(oe,{label:"About yourself",id:"description",name:"description",error:v.description,className:"two-columns"}),Object(H.jsx)("input",{className:"btn-submit",type:"submit"})]})]})]})})},de=(r(226),r(227),function(e){var t=e.text;return Object(H.jsx)("div",{id:"box-error-login",children:Object(H.jsx)("p",{id:"text-error-login",children:t})})}),je=function(){var e=Object(A.b)(),t=Object(A.c)(V),r=h(),n=Object(A.c)(v),a=Object(te.b)({defaultValues:{email:"",password:""},onSubmit:function(t,r){var n,a=r.reset;e((n=t,function(){var e=Object(u.a)(o.a.mark((function e(t){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(p({error:null})),t(w()),e.prev=2,e.next=5,b(n);case 5:r=e.sent,console.log("login action: ",r),localStorage.setItem("USER_ID",JSON.stringify(r.id)),t(x({currentUser:r.id})),t(L()),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),t(p({error:e.t0.message}));case 15:return e.prev=15,t(k()),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])})));return function(t){return e.apply(this,arguments)}}())),a()}}),s=a.form;return console.log("auth: ",t),Object(H.jsxs)("div",{children:[n&&Object(H.jsx)(de,{text:n}),Object(H.jsxs)("div",{className:"box-login",children:[t&&Object(H.jsx)(_.a,{to:"/user/".concat(r,"/me")}),Object(H.jsxs)("form",{ref:s,noValidate:!0,children:[Object(H.jsx)("div",{className:"box-header",children:Object(H.jsx)("h4",{className:"styled-h4",children:"Login"})}),Object(H.jsxs)("div",{className:"box-body",children:[Object(H.jsx)("div",{children:Object(H.jsx)("input",{className:"width-100 styled-inp",name:"email",type:"email",id:"email",placeholder:"e.g. example@test.com"})}),Object(H.jsx)("div",{children:Object(H.jsx)("label",{className:"label text-gray",htmlFor:"email",children:"Your E-mail"})}),Object(H.jsx)("div",{children:Object(H.jsx)("input",{className:"width-100 styled-inp",name:"password",type:"password",placeholder:"type your password"})}),Object(H.jsx)("div",{children:Object(H.jsx)("label",{className:"label text-gray",htmlFor:"password",children:"Your password"})}),Object(H.jsx)("h6",{className:"styled-h6",children:"Forgot Username or password?"})]}),Object(H.jsx)("div",{className:"box-btns",children:Object(H.jsx)("input",{className:"btn-login",type:"submit",value:"log in"})}),Object(H.jsxs)("div",{className:"box-footer",children:[Object(H.jsx)("div",{children:Object(H.jsx)("p",{className:"styled-p",children:"Don't have an account?"})}),Object(H.jsx)("br",{}),Object(H.jsx)(i.b,{to:"/auth/signup",children:Object(H.jsx)("button",{className:"btn-reg",children:"Sign up now"})})]})]})]})]})},be=(r(228),r.p+"static/media/26451688.8a4c9451.jpg"),Ce=function(){return Object(H.jsxs)("div",{id:"home-wrapper",children:[Object(H.jsx)("img",{id:"home-bg",src:be,alt:"bg-home"}),Object(H.jsx)("div",{id:"home-text",children:Object(H.jsx)("h1",{id:"home-text-h1",children:"Practice with Us!"})})]})},Ie=(r(229),r(230),function(e){var t=e.user;return Object(H.jsxs)("div",{children:[Object(H.jsx)("div",{id:"user-img",style:{background:"url(".concat(t.img,") no-repeat center"),backgroundSize:"cover"}}),Object(H.jsx)("div",{id:"user-info",children:Object(H.jsxs)("div",{id:"user-mainInfo",children:[Object(H.jsxs)("h4",{className:"user-name",children:[t.firstName," ",t.lastName]}),Object(H.jsx)("p",{className:"user-card-text",children:"Native: "}),Object(H.jsx)("p",{className:"user-card-text",children:t.nativeLanguage}),Object(H.jsx)("p",{className:"user-card-text",children:" | "}),Object(H.jsx)("p",{className:"user-card-text",children:"Practice: "}),Object(H.jsx)("p",{className:"user-card-text",children:t.practiceLanguage}),Object(H.jsx)("br",{}),Object(H.jsx)("br",{}),Object(H.jsx)("p",{className:"user-card-text",children:t.about})]})})]})}),me=(r(231),function(){var e=Object(n.useState)(null),t=Object($.a)(e,2),r=t[0],a=t[1],s=Object(n.useState)(null),c=Object($.a)(s,2),i=c[0],A=c[1],g=Object(_.g)(),l=[{key:"choose language",value:null},{key:"english",value:"english"},{key:"german",value:"german"},{key:"french",value:"french"},{key:"spanish",value:"spanish"},{key:"russian",value:"russian"},{key:"italian",value:"italian"},{key:"portuguese",value:"portuguese"}];return Object(H.jsx)("div",{className:"wrapper",children:Object(H.jsx)("form",{id:"form-search",children:Object(H.jsxs)("div",{id:"wrapper-search",children:[Object(H.jsx)("div",{className:"box-search-languages",children:Object(H.jsxs)("div",{className:"m-center",children:[Object(H.jsx)("div",{className:"lb-search",children:Object(H.jsx)("label",{htmlFor:"nativeLanguage",children:"Find users by native language:"})}),Object(H.jsx)("select",{className:"select-custom",onChange:function(e){a(e.target.value)},children:l.map((function(e,t){return Object(H.jsx)("option",{name:"nativeLanguage",value:e.value,children:e.key},t)}))})]})}),Object(H.jsx)("div",{className:"box-search-languages",children:Object(H.jsxs)("div",{className:"m-center",children:[Object(H.jsx)("div",{className:"lb-search",children:Object(H.jsx)("label",{htmlFor:"practiceLanguage",children:"Find users by language they practice:"})}),Object(H.jsx)("select",{className:"select-custom",onChange:function(e){A(e.target.value)},children:l.map((function(e,t){return Object(H.jsx)("option",{name:"practiceLanguage",value:e.value,children:e.key},t)}))})]})}),Object(H.jsx)("div",{id:"box-search-btn",children:Object(H.jsx)("div",{className:"m-center",children:Object(H.jsx)("button",{id:"btn-search",onClick:function(){return g(r&&i?"/users/native=".concat(r,"/practice=").concat(i):r?"/users/native=".concat(r):"/users/practice=".concat(i))},children:"search"})})})]})})})}),pe=(r(232),function(e){return Object(H.jsx)("div",{id:"wrapper-loader",children:Object(H.jsx)("div",{id:"box-loader",children:Object(H.jsxs)("div",{className:"lds-ring",children:[Object(H.jsx)("div",{}),Object(H.jsx)("div",{}),Object(H.jsx)("div",{}),Object(H.jsx)("div",{})]})})})}),xe=function(){var e=h(),t=Object(A.b)(),r=Object(A.c)(S);console.log(e),Object(n.useEffect)((function(){t(J())}),[t]);var a=Object(A.c)(X);return Object(H.jsx)("div",{id:"wrapper",children:r?Object(H.jsx)(pe,{}):Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)(me,{}),Object(H.jsx)("div",{id:"wrapper-users",children:a.map((function(t){if(e!==t._id)return Object(H.jsx)(i.b,{id:"box",to:"/users/".concat(t._id),children:Object(H.jsx)(Ie,{user:t},t._id)},t._id)}))})]})})},Oe=function(){return Object(H.jsx)("div",{children:Object(H.jsx)("p",{children:"userHomePage"})})},ve=function(){return Object(H.jsx)("div",{})},he=(r(85),function(e){var t,r=e.currentUser,n=Object(A.b)(),s=Object(A.c)(q),c=a.a.useState(null),i=Object($.a)(c,2),g=i[0],l=i[1],d=a.a.useState(null),b=Object($.a)(d,2),C=b[0],I=b[1],m=a.a.useCallback(Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(t=new FormData).append("image",g),console.log("data: ",g),e.next=6,j.post("/upload",t,{headers:{"content-type":"multipart/form-data"}}).then((function(e){return console.log("res",e),I(e.data.location)}));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),[g]),p=[{key:"choose language",value:null},{key:"english",value:"english"},{key:"german",value:"german"},{key:"french",value:"french"},{key:"spanish",value:"spanish"},{key:"russian",value:"russian"},{key:"italian",value:"italian"},{key:"portuguese",value:"portuguese"}],x={firstName:r.firstName,lastName:r.lastName,gender:r.gender,email:r.email,age:r.age,img:r.img,about:r.about,zip:r.zip,nativeLanguage:r.nativeLanguage,practiceLanguage:r.practiceLanguage,interests:r.interests,description:r.description},O=ee.b({firstName:ee.d().required().min(2),lastName:ee.d().required().min(2),gender:ee.d().required(),email:ee.d().required(),age:ee.a(),zip:ee.d().required(),img:ee.d(),about:ee.d(),description:ee.d(),interests:ee.d(),nativeLanguage:ee.d().required("Required"),practiceLanguage:ee.d().required("Required")}),v=Object(te.b)({defaultValues:x,validate:(t=O,function(){var e=Object(u.a)(o.a.mark((function e(r){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},e.prev=1,e.next=4,t.validate(r,{abortEarly:!1});case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),e.t0.inner.forEach((function(e){var t=e.path,r=e.message;return Object(te.a)(n,t,r)}));case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()),onSubmit:function(e){console.log("onSubmit: ",e),console.log("isUpdated: ",s),g?(n(P(r._id,Object(E.a)(Object(E.a)({},e),{},{img:C}))),setTimeout((function(){fe()}),1e3)):(n(P(r._id,e)),setTimeout((function(){fe()}),1e3))}}),h=v.form,f=(0,v.use)("errors",{errorWithTouched:!0});return Object(H.jsxs)("div",{id:"wrapper-profile",children:[Object(H.jsx)("div",{id:"box-profile-information",children:Object(H.jsxs)("div",{children:[Object(H.jsx)("h4",{children:"Profile information: "}),Object(H.jsxs)("form",{className:"form-profile",ref:h,method:"POST",enctype:"multipart/form-data",children:[Object(H.jsx)(ge,{id:"gender",label:"Sex",name:"gender",options:[{key:"Male",value:"m"},{key:"Female",value:"f"}],error:f.gender}),Object(H.jsx)(se,{id:"firstName",type:"text",label:"First name",name:"firstName",error:f.firstName}),Object(H.jsx)(se,{id:"lastName",type:"text",label:"Last name",name:"lastName",error:f.lastName}),Object(H.jsx)(se,{id:"email",type:"email",label:"Email",name:"email",className:"two-columns",error:f.email}),Object(H.jsx)(se,{id:"age",type:"number",label:"Age",name:"age",error:f.age}),Object(H.jsx)(se,{id:"zip",type:"number",label:"Your ZIP(must be in Berlin)",name:"zip"}),Object(H.jsx)(ie,{label:"Your native language",name:"nativeLanguage",options:p,error:f.nativeLanguage}),Object(H.jsx)(ie,{label:"Language you want to practice",name:"practiceLanguage",options:p,error:f.practiceLanguage}),Object(H.jsx)(se,{id:"about",type:"text",label:"Short infomation",name:"about",className:"two-columns"}),Object(H.jsx)(oe,{label:"Interests",id:"interests",name:"interests",error:f.interests,className:"two-columns"}),Object(H.jsx)(oe,{label:"About yourself",id:"description",name:"description",error:f.description,className:"two-columns"}),Object(H.jsx)("input",{className:"btn-submit",type:"submit"})]})]})}),Object(H.jsxs)("div",{id:"box-profile-avatar",children:[C?Object(H.jsx)("div",{id:"profile-avatar",style:{background:"url(".concat(C,") no-repeat center"),backgroundSize:"cover"},alt:"avatar"}):Object(H.jsx)("div",{id:"profile-avatar",style:{background:"url(".concat(r.img,") no-repeat center"),backgroundSize:"cover"},alt:"defaultAvatar"}),Object(H.jsx)("input",{id:"upload",type:"file",style:{display:"none"},onChange:function(e){return l(e.target.files[0])}}),Object(H.jsxs)("div",{id:"btns-upload",children:[Object(H.jsx)("input",{id:"btn-upload",value:"browse...",type:"button",onClick:function(){return document.getElementById("upload").click()},name:"img"}),Object(H.jsx)("button",{id:"btn-setAvatar",onClick:m,children:"change avatar"})]})]})]})}),fe=function(){window.location.reload(!1)},Ne=function(){var e=h(),t=Object(A.b)(),r=Object(A.c)(X),a=D(r,e);return Object(n.useEffect)((function(){a||t(J())}),[t,a]),Object(H.jsx)(H.Fragment,{children:a&&Object(H.jsx)(he,{currentUser:a})})},ye=(r(86),r.p+"static/media/envelope.d3049b2d.svg"),we=r.p+"static/media/user (2).be851f03.svg",ke=r.p+"static/media/star.3867327e.svg",Le=function(){var e=h();return Object(H.jsx)("div",{id:"menu-left",children:Object(H.jsxs)("ul",{className:"nav-left",children:[Object(H.jsx)(i.b,{to:"/user/".concat(e,"/me/profile"),className:"no-decoration",children:Object(H.jsxs)("li",{className:"nav-left-li",children:[Object(H.jsx)("img",{id:"svg-img",src:we,alt:"img"}),"Profile"]})}),Object(H.jsx)(i.b,{to:"/user/".concat(e,"/me/messages"),className:"no-decoration",children:Object(H.jsxs)("li",{className:"nav-left-li",children:[Object(H.jsx)("img",{id:"svg-img",src:ye,alt:"img"}),"Messages"]})}),Object(H.jsx)(i.b,{to:"/user/".concat(e,"/me/favourites"),className:"no-decoration",children:Object(H.jsxs)("li",{className:"nav-left-li",children:[Object(H.jsx)("img",{id:"svg-img",src:ke,alt:"img"}),"Favourites"]})})]})})},Ue=(r(233),function(){var e=Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j.get("/messages");case 3:return t=e.sent,e.abrupt("return",t.data);case 7:throw e.prev=7,e.t0=e.catch(0),new Error(e.t0.response.data.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}()),Se=function(){var e=Object(u.a)(o.a.mark((function e(t){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j.post("/messages",t);case 3:return r=e.sent,console.log(r.data),e.abrupt("return",r.data);case 8:throw e.prev=8,e.t0=e.catch(0),new Error(e.t0.response.data.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),Ve=Object(g.b)({name:"messages",initialState:{messages:[]},reducers:{setMessages:function(e,t){var r=t.payload;e.messages=r.messages},addMessage:function(e,t){var r=t.payload;e.messages.push(r)}}}),Ee=Ve.reducer,ze=Ve.actions,Te=ze.setMessages,Be=ze.addMessage,Fe=function(e){return e.messages.messages},Re=function(){return function(){var e=Object(u.a)(o.a.mark((function e(t){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(w()),e.prev=1,e.next=4,Ue();case 4:r=e.sent,t(Te({messages:r})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0.message);case 11:return e.prev=11,t(k()),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[1,8,11,14]])})));return function(t){return e.apply(this,arguments)}}()},Me=function(e){return function(){var t=Object(u.a)(o.a.mark((function t(r){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r(w()),t.prev=1,t.next=4,Se(e);case 4:n=t.sent,r(Be(Object(E.a)({},n))),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.log(t.t0.message);case 11:return t.prev=11,r(k()),t.finish(11);case 14:case"end":return t.stop()}}),t,null,[[1,8,11,14]])})));return function(e){return t.apply(this,arguments)}}()},Ge=function(e){var t=e.messages,r=e.currentUserId,n=e.id,a=t.filter((function(e){return e.sentBy===n&&e.recipient===r||e.sentBy===r&&e.recipient===n}));return console.log("messages:",t),Object(H.jsx)("div",{children:a.map((function(e,t){var n=e.createdAt.split("T")[0],a=e.createdAt.split("T")[1],s=n.split("-")[2]+"."+n.split("-")[1],c=a.split(":")[0]+":"+a.split(":")[1];return e.sentBy===r?Object(H.jsxs)("div",{className:"right",children:[e.text,Object(H.jsx)("p",{id:"sign",children:"me"}),Object(H.jsxs)("p",{className:"dateAnDTimeRight",children:[s,"   ",c]})]},t):Object(H.jsxs)("div",{className:"left",children:[e.text,Object(H.jsxs)("p",{className:"dateAnDTimeLeft",children:[s,"   ",c]})]},t)}))})},We=function(){var e=Object(A.c)(X),t=Object(A.b)();Object(n.useEffect)((function(){t(J())}),[t]);var r=Object(A.c)(Fe);Object(n.useEffect)((function(){var e=setInterval((function(){t(Re())}),5e3);return function(){clearInterval(e),!1}}));var a=Object(_.g)(),s=h(),c=Object(_.h)().id,i=D(e,c),g=Object(te.b)({defaultValues:{text:""},onSubmit:function(e,r){var n=r.reset,a=Object(E.a)(Object(E.a)({},e),{},{sentBy:s,recipient:c});console.log("onSubmit: ",a),t(Me(a)),n()}}).form;return Object(H.jsxs)("div",{className:"wrapper-msg",children:[Object(H.jsxs)("div",{className:"wrapper-msg-left",children:[Object(H.jsx)("div",{id:"box-top-msgs",children:0!==r.length&&Object(H.jsx)(Ge,{messages:r,currentUserId:s,id:c})}),Object(H.jsx)("div",{id:"box-bottom-input",children:Object(H.jsxs)("form",{id:"box-bottom-form",ref:g,children:[Object(H.jsxs)("div",{id:"box-bottom-message",children:[Object(H.jsx)("textarea",{id:"textarea-msg",name:"text",placeholder:"Write your message"}),Object(H.jsx)("br",{})]}),Object(H.jsx)("button",{id:"btn-send",type:"submit",children:"Send"})]})})]}),0!==e.length&&Object(H.jsx)("div",{className:"wrapper-msg-right",children:Object(H.jsxs)("div",{id:"box-right",children:[Object(H.jsx)("div",{id:"box-right-top",children:Object(H.jsx)("div",{id:"box-right-img",style:{background:"url(".concat(i.img,") no-repeat center"),backgroundSize:"cover"}})}),Object(H.jsxs)("div",{id:"box-right-bottom",children:[Object(H.jsxs)("div",{id:"box-right-bottom-info",children:[Object(H.jsxs)("h4",{id:"text-user-name",children:[i.firstName," ",i.lastName]}),Object(H.jsx)("p",{className:"text-user",id:"text-user-about",children:"Some user\xb4s information"}),Object(H.jsx)("br",{}),Object(H.jsxs)("p",{className:"text-user",id:"text-user-learn",children:["Learn: ",i.practiceLanguage]}),Object(H.jsxs)("p",{className:"text-user",id:"text-user-native",children:["Native: ",i.nativeLanguage]})]}),Object(H.jsx)("div",{id:"box-right-bottom-btn",children:Object(H.jsx)("button",{className:"right-bottom-btn",id:"btn-view-profile",onClick:function(){return a("/users/".concat(i._id))},children:"view profile"})})]})]})})]})},Ke=r(10),Ze=(r(234),r(235),function(e){var t=e.user,r=e.messages,a=e.currentUserId,s=Object(A.b)();Object(n.useEffect)((function(){s(Re())}),[s]);var c=r.filter((function(e){return e.sentBy===t._id&&e.recipient===a||e.sentBy===a&&e.recipient===t._id})),i=c[c.length-1];return Object(H.jsxs)("div",{className:"box-message",children:[Object(H.jsx)("div",{className:"",children:Object(H.jsx)("div",{className:"avatar",style:{background:"url(".concat(t.img,") no-repeat center"),backgroundSize:"cover"}})}),Object(H.jsxs)("h3",{className:"msg-sentBy",children:[t.firstName," ",t.lastName]}),i?Object(H.jsx)("p",{id:"msg-text",children:i.text}):Object(H.jsx)("div",{})]})}),Xe=function(){var e=Object(A.b)();Object(n.useEffect)((function(){e(Re())}),[e]),Object(n.useEffect)((function(){e(J())}),[e]);var t=Object(A.c)(Fe),r=h(),a=Object(A.c)(X),s=function(e,t){var r=[];return null!==e&&(r=t.filter((function(t){return t.recipient===e}))),r}(r,t),c=function(e,t){var r=[];return null!==e&&(r=t.filter((function(t){return t.sentBy===e}))),r}(r,t),g=s.filter((function(e,t,r){return r.findIndex((function(t){return t.sentBy===e.sentBy}))===t})),l=c.filter((function(e,t,r){return r.findIndex((function(t){return t.recipient===e.recipient}))===t}));g.push.apply(g,Object(Ke.a)(l));var o=g.map((function(e){return e.sentBy===r?e.recipient:e.sentBy})).filter((function(e,t,r){return r.indexOf(e)===t}));var u=function(){for(var e=[],t=0;t<o.length;t++){var r=D(a,o[t]);e.push(r)}return e}();return Object(H.jsx)("div",{children:Object(H.jsx)("div",{className:"wrapper-allUsers",children:Object(H.jsx)("div",{className:"allUsers",children:0===t.length||0===a.length?Object(H.jsx)("div",{}):Object(H.jsx)("div",{children:u.map((function(e){return Object(H.jsx)(i.b,{id:"box-msg",to:"/user/".concat(r,"/me/messages/").concat(e._id),children:Object(H.jsx)(Ze,{user:e,users:a,messages:t,currentUserId:r},e._id)},e._id)}))})})})})},Ye=(r(236),r(237),function(e){var t=e.user;return Object(H.jsxs)("div",{id:"user-fav-box",children:[Object(H.jsx)("div",{id:"user-fav-img",style:{background:"url(".concat("http://localhost:8080/images/"+t.img,") no-repeat center"),backgroundSize:"cover"}}),Object(H.jsx)("div",{id:"user-fav-info",children:Object(H.jsxs)("div",{id:"user-fav-mainInfo",children:[Object(H.jsxs)("h4",{className:"user-fav-name",children:[t.firstName," ",t.lastName]}),Object(H.jsx)("p",{className:"user-fav-card-text",children:"Native: "}),Object(H.jsx)("p",{className:"user-fav-card-text",children:t.nativeLanguage}),Object(H.jsx)("p",{className:"user-card-text",children:" | "}),Object(H.jsx)("p",{className:"user-fav-card-text",children:"Practice: "}),Object(H.jsx)("p",{className:"user-fav-card-text",children:t.practiceLanguage}),Object(H.jsx)("br",{}),Object(H.jsx)("br",{})]})})]})}),qe=function(e){var t=e.users,r=h(),n=D(t,r),a=n.favourites;console.log("currentUser: ",n);var s=function(){for(var e=[],r=function(r){var n=t.find((function(e){return e._id===a[r]}));e.push(n)},n=0;n<a.length;n++)r(n);return e}();return Object(H.jsx)("div",{id:"wrapper-favourites",children:s.map((function(e){return Object(H.jsx)(i.b,{id:"box-fav",to:"/users/".concat(e._id),children:Object(H.jsx)(Ye,{user:e},e._id)},e._id)}))})},Je=function(){var e=Object(A.b)(),t=Object(A.c)(X);return Object(n.useEffect)((function(){t||e(J())}),[e,t]),Object(H.jsx)("div",{children:t.length&&Object(H.jsx)(qe,{users:t})})},Pe=function(){var e=Object(A.c)(X);Object(A.c)(S);return Object(H.jsxs)("div",{children:[Object(H.jsx)(Le,{}),0===e.length&&Object(H.jsx)(pe,{}),Object(H.jsxs)(_.d,{children:[Object(H.jsx)(_.b,{path:"profile",element:Object(H.jsx)(Ne,{})}),Object(H.jsx)(_.b,{path:"messages/*",element:Object(H.jsx)(Xe,{})}),Object(H.jsx)(_.b,{path:"messages/:id/*",element:Object(H.jsx)(We,{})}),Object(H.jsx)(_.b,{path:"favourites",element:Object(H.jsx)(Je,{})})]})]})},De=(r(238),r(53)),He=r.n(De),Qe=function(){var e=Object(A.b)(),t=Object(A.c)(V),r=Object(_.g)();e(L()),Object(n.useEffect)((function(){e(J())}),[e]);var a=Object(_.h)().id,s=Object(A.c)(X),c=h(),i=D(s,c),g=D(s,a),l=Object(te.b)({defaultValues:{text:""},onSubmit:function(t,r){var n=r.reset,s=Object(E.a)(Object(E.a)({},t),{},{sentBy:c,recipient:a});console.log("onSubmit: ",s),e(Me(s)),n()}}).form;He.a.setAppElement(document.getElementById("root"));var d=Object(n.useState)(!1),j=Object($.a)(d,2),b=j[0],C=j[1];function I(){C(!1)}function m(){var t,r=Object.assign([],i.favourites);t=r.includes(g._id),console.log("isDouble:",t),t||(r.push(g._id),e(function(e,t){return function(){var r=Object(u.a)(o.a.mark((function r(n){return o.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n(K({error:null})),n(w()),r.prev=2,r.next=5,B(e,{favourites:t});case 5:r.next=10;break;case 7:r.prev=7,r.t0=r.catch(2),n(K({error:r.t0.message}));case 10:return r.prev=10,n(k()),r.finish(10);case 13:case"end":return r.stop()}}),r,null,[[2,7,10,13]])})));return function(e){return r.apply(this,arguments)}}()}(c,r)))}return Object(H.jsx)(H.Fragment,{children:0!==s.length&&Object(H.jsxs)("div",{id:"wrapper-userView",children:[Object(H.jsxs)("div",{className:"box",id:"box-left",children:[Object(H.jsx)("div",{id:"box-left-top"}),Object(H.jsx)("div",{id:"box-left-img",style:{background:"url(".concat(g.img,") no-repeat center"),backgroundSize:"100%"}}),Object(H.jsxs)("div",{id:"box-left-bottom",children:[Object(H.jsxs)("div",{id:"box-left-bottom-info",children:[Object(H.jsxs)("h4",{id:"text-user-name",children:[g.firstName," ",g.lastName]}),Object(H.jsx)("p",{className:"text-user",id:"text-user-about",children:g.about}),Object(H.jsx)("br",{}),Object(H.jsxs)("p",{className:"text-user",id:"text-user-learn",children:["Learn: ",g.practiceLanguage]}),Object(H.jsxs)("p",{className:"text-user",id:"text-user-native",children:["Native: ",g.nativeLanguage]})]}),t?Object(H.jsxs)("div",{id:"box-left-bottom-btns",children:[Object(H.jsx)("button",{className:"left-bottom-btns",id:"btn-add",onClick:function(){return m()},children:"add to favourites"}),Object(H.jsx)("button",{onClick:function(){C(!0)},className:"left-bottom-btns",id:"btn-contact",children:"send message"}),Object(H.jsxs)(He.a,{isOpen:b,onRequestClose:I,style:{content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",width:"400px",height:"200px"}},contentLabel:"Example Modal",children:[Object(H.jsx)("button",{id:"modal-btn-close",onClick:I,children:"X"}),Object(H.jsx)("div",{id:"modal-title",children:"Write your message:"}),Object(H.jsxs)("form",{ref:l,noValidate:!0,children:[Object(H.jsx)("textarea",{id:"modal-text",name:"text"}),Object(H.jsx)("input",{id:"modal-btn-submit",type:"submit"})]})]})]}):Object(H.jsxs)("div",{id:"box-left-bottom-btns",children:[Object(H.jsx)("p",{className:"text-user p-bottom",children:"Please login or register to contact a person"}),Object(H.jsx)("button",{onClick:function(){return r("/auth/login")},className:"left-bottom-btns",id:"btn-contact",children:"login"})]})]})]}),Object(H.jsx)("div",{className:"box",id:"box-right",children:Object(H.jsxs)("div",{id:"box-right-content",children:[Object(H.jsx)("div",{children:Object(H.jsx)("h4",{children:"User Profile"})}),Object(H.jsxs)("div",{id:"box-right-firstName",className:"box-right-style",children:[Object(H.jsx)("p",{className:"profile-text-styled",children:"First name:"}),Object(H.jsx)("p",{className:"profile-text-styled",children:g.firstName})]}),Object(H.jsxs)("div",{id:"box-right-lastName",className:"box-right-style",children:[Object(H.jsx)("p",{className:"profile-text-styled",children:"Last name:"}),Object(H.jsx)("p",{className:"profile-text-styled",children:g.lastName})]}),Object(H.jsxs)("div",{id:"box-right-bdate",className:"box-right-style",children:[Object(H.jsx)("p",{className:"profile-text-styled",children:"Age:"}),Object(H.jsx)("p",{className:"profile-text-styled",children:g.age})]}),Object(H.jsxs)("div",{id:"box-right-address",className:"box-right-style",children:[Object(H.jsx)("p",{className:"profile-text-styled",children:"Address:"}),Object(H.jsxs)("p",{className:"profile-text-styled",children:["Berlin, ",g.zip]})]}),Object(H.jsxs)("div",{id:"box-right-interests",className:"box-right-style",children:[Object(H.jsx)("p",{className:"profile-text-styled",children:"Interests:"}),Object(H.jsx)("p",{className:"profile-text-styled",children:g.interests})]}),Object(H.jsxs)("div",{id:"box-right-aboutme",className:"box-right-style",children:[Object(H.jsx)("p",{className:"profile-text-styled",children:"About me:"}),Object(H.jsx)("p",{className:"profile-text-styled",children:g.description})]})]})}),Object(H.jsx)("div",{className:"box",id:"box-3"})]})})},_e=function(){var e=Object(_.h)(),t=e.native,r=e.practice,a=Object(A.b)(),s=h(),c=Object(A.c)(S);Object(n.useEffect)((function(){a(J())}),[a]);var g=Object(A.c)(X);console.log("native",t),console.log("practice",r);var l=g.filter((function(e){return e.nativeLanguage===t})).filter((function(e){return e.practiceLanguage===r}));return console.log("usersAfterFilterByTwolanguages: ",l),Object(H.jsx)("div",{children:c?Object(H.jsx)(pe,{}):Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)(me,{}),Object(H.jsx)("div",{id:"wrapper-users",children:l.map((function(e){if(s!==e._id)return Object(H.jsx)(i.b,{id:"box",to:"/users/".concat(e._id),children:Object(H.jsx)(Ie,{user:e},e._id)},e._id)}))})]})})},$e=function(){var e=Object(_.h)().native,t=Object(A.b)(),r=h(),a=Object(A.c)(S);Object(n.useEffect)((function(){t(J())}),[t]);var s=Object(A.c)(X).filter((function(t){return t.nativeLanguage===e}));return console.log("usersAfterFilter by Native language: ",s),Object(H.jsx)("div",{children:a?Object(H.jsx)(pe,{}):Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)(me,{}),Object(H.jsx)("div",{id:"wrapper-users",children:s.map((function(e){if(r!==e._id)return Object(H.jsx)(i.b,{id:"box",to:"/users/".concat(e._id),children:Object(H.jsx)(Ie,{user:e},e._id)},e._id)}))})]})})},et=function(){var e=Object(_.h)().practice,t=Object(A.b)(),r=h(),a=Object(A.c)(S);Object(n.useEffect)((function(){t(J())}),[t]);var s=Object(A.c)(X).filter((function(t){return t.practiceLanguage===e}));return console.log("usersAfterFilter by Practice language: ",s),Object(H.jsx)("div",{children:a?Object(H.jsx)(pe,{}):Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)(me,{}),Object(H.jsx)("div",{id:"wrapper-users",children:s.map((function(e){if(r!==e._id)return Object(H.jsx)(i.b,{id:"box",to:"/users/".concat(e._id),children:Object(H.jsx)(Ie,{user:e},e._id)},e._id)}))})]})})};var tt=function(){var e=Object(A.c)(S);return Object(A.b)()(L()),console.log("isloading: ",e),Object(H.jsxs)("div",{children:[Object(H.jsx)(Q,{}),Object(H.jsxs)(_.d,{children:[Object(H.jsx)(_.b,{path:"/",element:Object(H.jsx)(Ce,{})}),Object(H.jsx)(_.b,{path:"auth/login",element:Object(H.jsx)(je,{})}),Object(H.jsx)(_.b,{path:"auth/signup",element:Object(H.jsx)(ue,{})}),Object(H.jsx)(_.b,{path:"users/*",element:Object(H.jsx)(xe,{})}),Object(H.jsx)(_.b,{path:"users/:id",element:Object(H.jsx)(Qe,{})}),Object(H.jsx)(_.b,{path:"blog",element:Object(H.jsx)(ve,{})}),Object(H.jsx)(_.b,{path:"user/:id/*",element:Object(H.jsx)(Oe,{})}),Object(H.jsx)(_.b,{path:"user/:id/me/*",element:Object(H.jsx)(Pe,{})}),Object(H.jsx)(_.b,{path:"/users/native=:native/practice=:practice",element:Object(H.jsx)(_e,{})}),Object(H.jsx)(_.b,{path:"/users/native=:native",element:Object(H.jsx)($e,{})}),Object(H.jsx)(_.b,{path:"/users/practice=:practice",element:Object(H.jsx)(et,{})})]})]})},rt=r(15),nt=Object(g.b)({name:"img",initialState:{avatar:null,images:null},reducers:{setAvatar:function(e,t){var r=t.payload;e.avatar=r.avatar},addImg:function(e,t){var r=t.payload;e.images.push(r)}}}),at=nt.reducer,st=nt.actions,ct=(st.setAvatar,st.addImg,st.setError,Object(rt.b)({user:R,app:N,messages:Ee,auth:I,img:at})),it=Object(g.a)({reducer:ct});c.a.render(Object(H.jsx)(a.a.StrictMode,{children:Object(H.jsx)(A.a,{store:it,children:Object(H.jsx)(i.a,{children:Object(H.jsx)(tt,{})})})}),document.getElementById("root"))},28:function(e,t,r){},54:function(e,t,r){},85:function(e,t,r){},86:function(e,t,r){},99:function(e,t,r){}},[[248,1,2]]]);
//# sourceMappingURL=main.460540a7.chunk.js.map