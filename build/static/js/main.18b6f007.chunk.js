(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{105:function(e,t,r){},106:function(e,t,r){},119:function(e,t,r){},120:function(e,t,r){},149:function(e,t){},151:function(e,t){},263:function(e,t,r){},264:function(e,t,r){},265:function(e,t,r){},266:function(e,t,r){},267:function(e,t,r){},268:function(e,t,r){},269:function(e,t,r){},270:function(e,t,r){},271:function(e,t,r){},272:function(e,t,r){},273:function(e,t,r){},274:function(e,t,r){},275:function(e,t,r){},276:function(e,t,r){},286:function(e,t,r){"use strict";r.r(t);var n=r(1),a=r.n(n),s=r(35),c=r.n(s),i=(r(119),r(63),r(6)),A=(r(120),r(2)),g=r(15),l=r(3),o=r.n(l),u=r(5),d=r(111),j=r.n(d),b=r(144),C=j.a.create({baseURL:"http://ec2-3-21-19-104.us-east-2.compute.amazonaws.com/api",httpsAgent:new b.Agent({rejectUnauthorized:!1})});C.interceptors.response.use((function(e){return e.config.url.startsWith("/auth/signin")&&localStorage.setItem("TOKEN",e.data.accessToken),e}),(function(e){return 401===e.response.status&&localStorage.removeItem("TOKEN"),Promise.reject(e)})),C.interceptors.request.use((function(e){return console.log("config: ",e),e.url.startsWith("/auth")||(e.headers={"x-access-token":localStorage.getItem("TOKEN")||""}),e}),(function(e){return Promise.reject(e)}));var I=function(){var e=Object(u.a)(o.a.mark((function e(t){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.post("/auth/signin",t);case 3:return r=e.sent,e.abrupt("return",r.data);case 7:throw e.prev=7,e.t0=e.catch(0),new Error(e.t0.response.data.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),m=Object(g.b)({name:"auth",initialState:{error:null,currentUser:null},reducers:{setError:function(e,t){var r=t.payload;e.error=r.error},clearError:function(e){e.error=null},setCurrentUser:function(e,t){var r=t.payload;e.currentUser=r.currentUser},removeCurrentUser:function(e){e.currentUser=null}}}),p=m.reducer,x=m.actions,O=x.setError,v=(x.clearError,x.setCurrentUser),h=x.removeCurrentUser,f=function(e){return e.auth.error},N=function(){return JSON.parse(localStorage.getItem("USER_ID"))||null},y=Object(g.b)({name:"app",initialState:{isLoading:!1,isAuth:!1},reducers:{startLoading:function(e){e.isLoading=!0},stopLoading:function(e){e.isLoading=!1},authSuccess:function(e){e.isAuth=null!==localStorage.getItem("TOKEN")},logout:function(e,t){var r=t.payload;e.isAuth=r.isAuth}}}),w=y.reducer,k=y.actions,L=k.startLoading,U=k.stopLoading,S=k.authSuccess,V=k.logout,E=function(e){return e.app.isLoading},z=function(e){return e.app.isAuth},T=r(8),B=function(){var e=Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.get("/users");case 3:return t=e.sent,e.abrupt("return",t.data);case 7:throw e.prev=7,e.t0=e.catch(0),new Error(e.t0.response.data.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),F=function(){var e=Object(u.a)(o.a.mark((function e(t){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.post("/auth/signup",t);case 3:return r=e.sent,e.abrupt("return",r.data);case 7:throw e.prev=7,e.t0=e.catch(0),new Error(e.t0.response.data.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=Object(u.a)(o.a.mark((function e(t,r){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.put("/users/".concat(t),r);case 3:return n=e.sent,e.abrupt("return",n.data);case 7:throw e.prev=7,e.t0=e.catch(0),new Error(e.t0.response.data.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,r){return e.apply(this,arguments)}}(),M=Object(g.b)({name:"user",initialState:{users:[],error:null,isUpdated:!1},reducers:{setUsers:function(e,t){var r=t.payload;e.users=r.users},addUser:function(e,t){var r=t.payload;e.users.push(r)},setError:function(e,t){var r=t.payload;e.error=r.error},setIsUpdated:function(e,t){var r=t.payload;e.isUpdated=r.isUpdated}}}),G=M.reducer,W=M.actions,K=W.setUsers,Z=W.addUser,X=(W.addNewValueToUser,W.setError),Y=W.setIsUpdated,q=function(e){return e.user.users},J=function(e){return e.user.error},P=function(e){return e.user.isUpdated},D=function(){return function(){var e=Object(u.a)(o.a.mark((function e(t){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(X({error:null})),t(L()),e.prev=2,e.next=5,B();case 5:r=e.sent,t(K({users:r})),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),t(X({error:e.t0.message})),console.log(e.t0.message);case 13:return e.prev=13,t(U()),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[2,9,13,16]])})));return function(t){return e.apply(this,arguments)}}()},H=function(e,t){return function(){var r=Object(u.a)(o.a.mark((function r(n){return o.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n(X({error:null})),n(L()),n(Y({isUpdated:!1})),r.prev=3,r.next=6,R(e,t);case 6:r.next=11;break;case 8:r.prev=8,r.t0=r.catch(3),n(X({error:r.t0.message}));case 11:return r.prev=11,n(U()),n(Y({isUpdated:!0})),r.finish(11);case 15:case"end":return r.stop()}}),r,null,[[3,8,11,15]])})));return function(e){return r.apply(this,arguments)}}()},Q=function(e,t){return e.find((function(e){return e._id===t}))},_=r(0);function $(){var e=Object(A.c)(z),t=Object(A.b)(),r=N();Object(n.useEffect)((function(){t(D())}),[t]);var a=Object(A.c)(q),s=Q(a,r);return console.log("auth: ",e),Object(_.jsx)("div",{id:"wrapper-header",children:Object(_.jsxs)("div",{className:"header",children:[Object(_.jsx)(i.b,{to:"/",children:Object(_.jsxs)("div",{id:"logo",children:[Object(_.jsx)("div",{id:"logo-circle-1"}),Object(_.jsx)("div",{id:"logo-circle-2"})]})}),0===a.length?Object(_.jsx)("div",{}):e?Object(_.jsxs)(_.Fragment,{children:[Object(_.jsxs)("ul",{className:"nav-top",children:[Object(_.jsx)(i.b,{className:"nav-top-li",to:"/user/".concat(r,"/me"),children:Object(_.jsx)("div",{id:"nav-top-me",style:{background:"url(".concat(s.img,") no-repeat center"),backgroundSize:"cover"}})}),Object(_.jsx)("li",{children:Object(_.jsx)(i.b,{className:"nav-top-li",to:"/users",children:"Find a partner"})}),Object(_.jsx)("li",{children:Object(_.jsx)(i.b,{className:"nav-top-li",to:"/blog",children:"Blog"})})]}),Object(_.jsx)("div",{className:"text-end",children:Object(_.jsx)(i.b,{className:"nav-top-li",to:"/",onClick:function(){return t((function(e){localStorage.removeItem("USER_ID"),localStorage.removeItem("TOKEN"),e(h()),e(V({isAuth:!1}))}))},children:"Logout"})})]}):Object(_.jsxs)(_.Fragment,{children:[Object(_.jsxs)("ul",{className:"nav-top",children:[Object(_.jsx)("li",{children:Object(_.jsx)(i.b,{className:"nav-top-li",to:"/users",children:"Find a partner"})}),Object(_.jsx)("li",{children:Object(_.jsx)(i.b,{className:"nav-top-li",to:"/blog",children:"Blog"})})]}),Object(_.jsx)("div",{className:"text-end",children:Object(_.jsx)(i.b,{className:"nav-top-li",to:"/auth/login",children:"Login"})})]})]})})}var ee=r(4),te=r(9),re=r(7),ne=r(17),ae=r(22),se=(r(263),function(e){var t=e.text;return Object(_.jsx)("div",{id:"box-error",children:Object(_.jsx)("p",{id:"text-error",children:t})})}),ce=(r(34),["name","label","error","type","className"]);var ie=function(e){var t=e.name,r=e.label,n=e.error,a=e.type,s=e.className,c=Object(ae.a)(e,ce);return Object(_.jsxs)("div",{className:s,children:[Object(_.jsx)("div",{children:Object(_.jsx)("input",Object(T.a)({className:"width-100",type:a,name:t},c))}),Object(_.jsx)("div",{className:"lb-reg",children:Object(_.jsxs)("label",{htmlFor:t,children:[" ",r]})}),n&&Object(_.jsx)(se,{text:n})]})},Ae=["label","name","options","error"];var ge=function(e){var t=e.label,r=e.name,n=e.options,a=e.error,s=Object(ae.a)(e,Ae);return Object(_.jsxs)("div",{children:[Object(_.jsx)("div",{children:Object(_.jsx)("select",Object(T.a)(Object(T.a)({className:"width-100",id:r,name:r},s),{},{children:n.map((function(e){return null===e.value?Object(_.jsx)("option",{value:e.value,disabled:!0,children:e.key}):Object(_.jsx)("option",{value:e.value,placeholder:"options",children:e.key})}))}))}),Object(_.jsx)("div",{className:"lb-reg",children:Object(_.jsx)("label",{htmlFor:r,children:t})}),a&&Object(_.jsx)(se,{text:a})]})},le=["label","name","options","error"];var oe=function(e){e.label,e.name;var t=e.options,r=e.error,n=Object(ae.a)(e,le);return Object(_.jsxs)("div",{className:"two-columns",children:[Object(_.jsx)("div",{children:t.map((function(e){return Object(_.jsxs)("label",{className:"radio-btns text-gray",htmlFor:e.value,children:[Object(_.jsx)("input",Object(T.a)({className:"radio ",type:"radio",id:e.value,value:e.value,name:"gender"},n)),e.key]},e.key)}))}),Object(_.jsx)("div",{}),r&&Object(_.jsx)("p",{children:r})]})},ue=["label","id","error","className"];var de=function(e){var t=e.label,r=e.id,n=e.error,a=e.className,s=Object(ae.a)(e,ue);return Object(_.jsxs)("div",{className:a,children:[Object(_.jsx)("div",{children:Object(_.jsx)("textarea",Object(T.a)({className:"width-100 reg-textarea",id:r},s))}),Object(_.jsx)("div",{className:"lb-reg",children:Object(_.jsx)("label",{htmlFor:r,children:t})}),n&&Object(_.jsx)("p",{children:n})]})},je=function(){var e=a.a.useState(null),t=Object(te.a)(e,2),r=t[0],n=t[1],s=a.a.useState(null),c=Object(te.a)(s,2),i=c[0],g=c[1],l=Object(ee.g)(),d=Object(A.b)(),j=a.a.useCallback(Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(t=new FormData).append("image",r),console.log("data: ",r),e.next=6,C.post("/upload",t,{headers:{"content-type":"multipart/form-data"}}).then((function(e){return console.log("res",e),g(e.data.location)}));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),[r]),b=Object(A.c)(J);console.log("errByAddUser: ",b);var I,m=[{key:"choose language",value:null},{key:"english",value:"english"},{key:"german",value:"german"},{key:"french",value:"french"},{key:"spanish",value:"spanish"},{key:"russian",value:"russian"},{key:"italian",value:"italian"},{key:"portuguese",value:"portuguese"}],p=re.b({firstName:re.d().required().min(2),lastName:re.d().required().min(2),gender:re.d().required(),email:re.d().required(),password:re.d().required(),age:re.a(),zip:re.d().required(),passwordConfirm:re.d().oneOf([re.c("password"),null],"Passwords must match"),img:re.d(),about:re.d(),description:re.d(),interests:re.d(),nativeLanguage:re.d().required("Required"),practiceLanguage:re.d().required("Required")}),x=Object(ne.b)({defaultValues:{firstName:"",lastName:"",gender:"",email:"",password:"",passwordConfirm:"",age:null,img:"",about:"",zip:null,nativeLanguage:"",practiceLanguage:"",interests:"",description:""},validate:(I=p,function(){var e=Object(u.a)(o.a.mark((function e(t){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={},e.prev=1,e.next=4,I.validate(t,{abortEarly:!1});case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),e.t0.inner.forEach((function(e){var t=e.path,n=e.message;return Object(ne.a)(r,t,n)}));case 9:return e.abrupt("return",r);case 10:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()),onSubmit:function(e,t){var r,n=t.reset;console.log("onSubmit: ",e),d((r=Object(T.a)(Object(T.a)({},e),{},{img:i}),function(){var e=Object(u.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(X({error:null})),t(L()),e.prev=2,e.next=5,F(r);case 5:n=e.sent,t(Z(Object(T.a)({},n))),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),console.log("err.message: ",e.t0.message),t(X({error:e.t0.message}));case 13:return e.prev=13,t(U()),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[2,9,13,16]])})));return function(t){return e.apply(this,arguments)}}())),n(),l("/auth/login")}}),O=x.form,v=(0,x.use)("errors",{errorWithTouched:!0});return Object(_.jsx)("div",{className:"wrapper",children:Object(_.jsxs)("div",{id:"wrapper-reg",children:[Object(_.jsx)("div",{id:"box-reg-left",children:Object(_.jsxs)("div",{children:[i?Object(_.jsx)("div",{id:"avatar",style:{background:"url(".concat(i,") no-repeat center"),backgroundSize:"cover"},alt:"avatar"}):Object(_.jsx)("div",{id:"avatar",style:{background:"url(".concat("data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEBLAEsAAD/4QBWRXhpZgAATU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAAITAAMAAAABAAEAAAAAAAAAAAEsAAAAAQAAASwAAAAB/+0ALFBob3Rvc2hvcCAzLjAAOEJJTQQEAAAAAAAPHAFaAAMbJUccAQAAAgAEAP/hDIFodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvADw/eHBhY2tldCBiZWdpbj0n77u/JyBpZD0nVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkJz8+Cjx4OnhtcG1ldGEgeG1sbnM6eD0nYWRvYmU6bnM6bWV0YS8nIHg6eG1wdGs9J0ltYWdlOjpFeGlmVG9vbCAxMC4xMCc+CjxyZGY6UkRGIHhtbG5zOnJkZj0naHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyc+CgogPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9JycKICB4bWxuczp0aWZmPSdodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyc+CiAgPHRpZmY6UmVzb2x1dGlvblVuaXQ+MjwvdGlmZjpSZXNvbHV0aW9uVW5pdD4KICA8dGlmZjpYUmVzb2x1dGlvbj4zMDAvMTwvdGlmZjpYUmVzb2x1dGlvbj4KICA8dGlmZjpZUmVzb2x1dGlvbj4zMDAvMTwvdGlmZjpZUmVzb2x1dGlvbj4KIDwvcmRmOkRlc2NyaXB0aW9uPgoKIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PScnCiAgeG1sbnM6eG1wTU09J2h0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8nPgogIDx4bXBNTTpEb2N1bWVudElEPmFkb2JlOmRvY2lkOnN0b2NrOjI2ZDgyYTA4LTRlODktNGY5NC1hZTYwLWZjNGVmZWM0YTMwYjwveG1wTU06RG9jdW1lbnRJRD4KICA8eG1wTU06SW5zdGFuY2VJRD54bXAuaWlkOmYxODk4MjZlLTU5MTYtNGU1My1hM2UzLWI0MzA2MmMzYzAwNDwveG1wTU06SW5zdGFuY2VJRD4KIDwvcmRmOkRlc2NyaXB0aW9uPgo8L3JkZjpSREY+CjwveDp4bXBtZXRhPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAo8P3hwYWNrZXQgZW5kPSd3Jz8+/9sAQwADAgIDAgIDAwMDBAMDBAUIBQUEBAUKBwcGCAwKDAwLCgsLDQ4SEA0OEQ4LCxAWEBETFBUVFQwPFxgWFBgSFBUU/8AACwgA8ADwAQERAP/EAB0AAQACAgMBAQAAAAAAAAAAAAAHCAUGAQMEAgn/xAA7EAACAQMCAgYGCQMFAQAAAAAAAQIDBAUGEQcxEiFBYXGBEzJRkaGxCBQiNkJ0krLBM0OCUmJywvCT/9oACAEBAAA/AP1TAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPipVhSg5TkoRXNyeyMZW1ZhLZ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",") no-repeat center"),backgroundSize:"100%"},alt:"defaultAvatar"}),Object(_.jsx)("input",{id:"upload",type:"file",style:{display:"none"},onChange:function(e){return n(e.target.files[0])}}),Object(_.jsxs)("div",{id:"btns-upload",children:[Object(_.jsx)("input",{id:"btn-upload",value:"browse...",type:"button",onClick:function(){return document.getElementById("upload").click()},name:"img"}),Object(_.jsx)("button",{id:"btn-setAvatar",onClick:j,children:"set avatar"})]})]})}),Object(_.jsxs)("div",{className:"box-reg-right",children:[b?Object(_.jsx)(se,{text:b}):Object(_.jsx)("div",{}),Object(_.jsx)("h4",{id:"title-reg",children:"Registration form"}),Object(_.jsxs)("form",{className:"form-registration",ref:O,method:"POST",enctype:"multipart/form-data",children:[Object(_.jsx)(oe,{id:"gender",label:"Sex",name:"gender",options:[{key:"Male",value:"m"},{key:"Female",value:"f"}],error:v.gender}),Object(_.jsx)(ie,{id:"firstName",type:"text",label:"First name",name:"firstName",error:v.firstName}),Object(_.jsx)(ie,{id:"lastName",type:"text",label:"Last name",name:"lastName",error:v.lastName}),Object(_.jsx)(ie,{id:"email",type:"email",label:"Email",name:"email",className:"two-columns",error:v.email}),Object(_.jsx)(ie,{id:"password",type:"password",label:"password",name:"password",error:v.password}),Object(_.jsx)(ie,{id:"passwordConfirm",type:"password",label:"Password confirmation",name:"passwordConfirm",error:v.password}),Object(_.jsx)(ie,{id:"age",type:"number",label:"Age",name:"age",error:v.age}),Object(_.jsx)(ie,{id:"zip",type:"number",label:"Your ZIP(must be in Berlin)",name:"zip"}),Object(_.jsx)(ge,{label:"Your native language",name:"nativeLanguage",options:m,error:v.nativeLanguage}),Object(_.jsx)(ge,{label:"Language you want to practice",name:"practiceLanguage",options:m,error:v.practiceLanguage}),Object(_.jsx)(ie,{id:"about",type:"text",label:"Short infomation",name:"about",className:"two-columns"}),Object(_.jsx)(de,{label:"Interests",id:"interests",name:"interests",error:v.interests,className:"two-columns"}),Object(_.jsx)(de,{label:"About yourself",id:"description",name:"description",error:v.description,className:"two-columns"}),Object(_.jsx)("input",{className:"btn-submit",type:"submit"})]})]})]})})},be=(r(264),r(265),function(e){var t=e.text;return Object(_.jsx)("div",{id:"box-error-login",children:Object(_.jsx)("p",{id:"text-error-login",children:t})})}),Ce=function(){var e=Object(A.b)(),t=Object(A.c)(z),r=N(),n=Object(A.c)(f),a=Object(ne.b)({defaultValues:{email:"",password:""},onSubmit:function(t,r){var n,a=r.reset;e((n=t,function(){var e=Object(u.a)(o.a.mark((function e(t){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(O({error:null})),t(L()),e.prev=2,e.next=5,I(n);case 5:r=e.sent,console.log("login action: ",r),localStorage.setItem("USER_ID",JSON.stringify(r.id)),t(v({currentUser:r.id})),t(S()),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),t(O({error:e.t0.message}));case 15:return e.prev=15,t(U()),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])})));return function(t){return e.apply(this,arguments)}}())),a()}}),s=a.form;return console.log("auth: ",t),Object(_.jsxs)("div",{children:[n&&Object(_.jsx)(be,{text:n}),Object(_.jsxs)("div",{className:"box-login",children:[t&&Object(_.jsx)(ee.a,{to:"/user/".concat(r,"/me")}),Object(_.jsxs)("form",{ref:s,noValidate:!0,children:[Object(_.jsx)("div",{className:"box-header",children:Object(_.jsx)("h4",{className:"styled-h4",children:"Login"})}),Object(_.jsxs)("div",{className:"box-body",children:[Object(_.jsx)("div",{children:Object(_.jsx)("input",{className:"width-100 styled-inp",name:"email",type:"email",id:"email",placeholder:"e.g. example@test.com"})}),Object(_.jsx)("div",{children:Object(_.jsx)("label",{className:"label text-gray",htmlFor:"email",children:"Your E-mail"})}),Object(_.jsx)("div",{children:Object(_.jsx)("input",{className:"width-100 styled-inp",name:"password",type:"password",placeholder:"type your password"})}),Object(_.jsx)("div",{children:Object(_.jsx)("label",{className:"label text-gray",htmlFor:"password",children:"Your password"})}),Object(_.jsx)("h6",{className:"styled-h6",children:"Forgot Username or password?"})]}),Object(_.jsx)("div",{className:"box-btns",children:Object(_.jsx)("input",{className:"btn-login",type:"submit",value:"log in"})}),Object(_.jsxs)("div",{className:"box-footer",children:[Object(_.jsx)("div",{children:Object(_.jsx)("p",{className:"styled-p",children:"Don't have an account?"})}),Object(_.jsx)("br",{}),Object(_.jsx)(i.b,{to:"/auth/signup",children:Object(_.jsx)("button",{className:"btn-reg",children:"Sign up now"})})]})]})]})]})},Ie=(r(266),r.p+"static/media/26451688.8a4c9451.jpg"),me=function(){return Object(_.jsxs)("div",{id:"home-wrapper",children:[Object(_.jsx)("img",{id:"home-bg",src:Ie,alt:"bg-home"}),Object(_.jsx)("div",{id:"home-text",children:Object(_.jsx)("h1",{id:"home-text-h1",children:"Practice with Us!"})})]})},pe=(r(267),r(268),function(e){var t=e.user;return Object(_.jsxs)("div",{children:[Object(_.jsx)("div",{id:"user-img",style:{background:"url(".concat(t.img,") no-repeat center"),backgroundSize:"cover"}}),Object(_.jsx)("div",{id:"user-info",children:Object(_.jsxs)("div",{id:"user-mainInfo",children:[Object(_.jsxs)("h4",{className:"user-name",children:[t.firstName," ",t.lastName]}),Object(_.jsx)("p",{className:"user-card-text",children:"Native: "}),Object(_.jsx)("p",{className:"user-card-text",children:t.nativeLanguage}),Object(_.jsx)("p",{className:"user-card-text",children:" | "}),Object(_.jsx)("p",{className:"user-card-text",children:"Practice: "}),Object(_.jsx)("p",{className:"user-card-text",children:t.practiceLanguage}),Object(_.jsx)("br",{}),Object(_.jsx)("br",{}),Object(_.jsx)("p",{className:"user-card-text",children:t.about})]})})]})}),xe=(r(269),function(){var e=Object(n.useState)(null),t=Object(te.a)(e,2),r=t[0],a=t[1],s=Object(n.useState)(null),c=Object(te.a)(s,2),i=c[0],A=c[1],g=Object(ee.g)(),l=[{key:"choose language",value:null},{key:"english",value:"english"},{key:"german",value:"german"},{key:"french",value:"french"},{key:"spanish",value:"spanish"},{key:"russian",value:"russian"},{key:"italian",value:"italian"},{key:"portuguese",value:"portuguese"}];return Object(_.jsx)("div",{className:"wrapper",children:Object(_.jsx)("form",{id:"form-search",children:Object(_.jsxs)("div",{id:"wrapper-search",children:[Object(_.jsx)("div",{className:"box-search-languages",children:Object(_.jsxs)("div",{className:"m-center",children:[Object(_.jsx)("div",{className:"lb-search",children:Object(_.jsx)("label",{htmlFor:"nativeLanguage",children:"Find users by native language:"})}),Object(_.jsx)("select",{className:"select-custom",onChange:function(e){a(e.target.value)},children:l.map((function(e,t){return Object(_.jsx)("option",{name:"nativeLanguage",value:e.value,children:e.key},t)}))})]})}),Object(_.jsx)("div",{className:"box-search-languages",children:Object(_.jsxs)("div",{className:"m-center",children:[Object(_.jsx)("div",{className:"lb-search",children:Object(_.jsx)("label",{htmlFor:"practiceLanguage",children:"Find users by language they practice:"})}),Object(_.jsx)("select",{className:"select-custom",onChange:function(e){A(e.target.value)},children:l.map((function(e,t){return Object(_.jsx)("option",{name:"practiceLanguage",value:e.value,children:e.key},t)}))})]})}),Object(_.jsx)("div",{id:"box-search-btn",children:Object(_.jsx)("div",{className:"m-center",children:Object(_.jsx)("button",{id:"btn-search",onClick:function(){return g(r&&i?"/users/native=".concat(r,"/practice=").concat(i):r?"/users/native=".concat(r):"/users/practice=".concat(i))},children:"search"})})})]})})})}),Oe=(r(270),function(e){return Object(_.jsx)("div",{id:"wrapper-loader",children:Object(_.jsx)("div",{id:"box-loader",children:Object(_.jsxs)("div",{className:"lds-ring",children:[Object(_.jsx)("div",{}),Object(_.jsx)("div",{}),Object(_.jsx)("div",{}),Object(_.jsx)("div",{})]})})})}),ve=function(){var e=N(),t=Object(A.b)(),r=Object(A.c)(E);console.log(e),Object(n.useEffect)((function(){t(D())}),[t]);var a=Object(A.c)(q);return Object(_.jsx)("div",{id:"wrapper",children:r?Object(_.jsx)(Oe,{}):Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(xe,{}),Object(_.jsx)("div",{id:"wrapper-users",children:a.map((function(t){if(e!==t._id)return Object(_.jsx)(i.b,{id:"box",to:"/users/".concat(t._id),children:Object(_.jsx)(pe,{user:t},t._id)},t._id)}))})]})})},he=function(){return Object(_.jsx)("div",{children:Object(_.jsx)("p",{children:"userHomePage"})})},fe=function(){return Object(_.jsx)("div",{})},Ne=(r(105),function(e){var t,r=e.currentUser,n=Object(A.b)(),s=Object(A.c)(P),c=a.a.useState(null),i=Object(te.a)(c,2),g=i[0],l=i[1],d=a.a.useState(null),j=Object(te.a)(d,2),b=j[0],I=j[1],m=a.a.useCallback(Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(t=new FormData).append("image",g),console.log("data: ",g),e.next=6,C.post("/upload",t,{headers:{"content-type":"multipart/form-data"}}).then((function(e){return console.log("res",e),I(e.data.location)}));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),[g]),p=[{key:"choose language",value:null},{key:"english",value:"english"},{key:"german",value:"german"},{key:"french",value:"french"},{key:"spanish",value:"spanish"},{key:"russian",value:"russian"},{key:"italian",value:"italian"},{key:"portuguese",value:"portuguese"}],x={firstName:r.firstName,lastName:r.lastName,gender:r.gender,email:r.email,age:r.age,img:r.img,about:r.about,zip:r.zip,nativeLanguage:r.nativeLanguage,practiceLanguage:r.practiceLanguage,interests:r.interests,description:r.description},O=re.b({firstName:re.d().required().min(2),lastName:re.d().required().min(2),gender:re.d().required(),email:re.d().required(),age:re.a(),zip:re.d().required(),img:re.d(),about:re.d(),description:re.d(),interests:re.d(),nativeLanguage:re.d().required("Required"),practiceLanguage:re.d().required("Required")}),v=Object(ne.b)({defaultValues:x,validate:(t=O,function(){var e=Object(u.a)(o.a.mark((function e(r){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},e.prev=1,e.next=4,t.validate(r,{abortEarly:!1});case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),e.t0.inner.forEach((function(e){var t=e.path,r=e.message;return Object(ne.a)(n,t,r)}));case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()),onSubmit:function(e){console.log("onSubmit: ",e),console.log("isUpdated: ",s),g?(n(H(r._id,Object(T.a)(Object(T.a)({},e),{},{img:b}))),setTimeout((function(){ye()}),1e3)):(n(H(r._id,e)),setTimeout((function(){ye()}),1e3))}}),h=v.form,f=(0,v.use)("errors",{errorWithTouched:!0});return Object(_.jsxs)("div",{id:"wrapper-profile",children:[Object(_.jsx)("div",{id:"box-profile-information",children:Object(_.jsxs)("div",{children:[Object(_.jsx)("h4",{children:"Profile information: "}),Object(_.jsxs)("form",{className:"form-profile",ref:h,method:"POST",enctype:"multipart/form-data",children:[Object(_.jsx)(oe,{id:"gender",label:"Sex",name:"gender",options:[{key:"Male",value:"m"},{key:"Female",value:"f"}],error:f.gender}),Object(_.jsx)(ie,{id:"firstName",type:"text",label:"First name",name:"firstName",error:f.firstName}),Object(_.jsx)(ie,{id:"lastName",type:"text",label:"Last name",name:"lastName",error:f.lastName}),Object(_.jsx)(ie,{id:"email",type:"email",label:"Email",name:"email",className:"two-columns",error:f.email}),Object(_.jsx)(ie,{id:"age",type:"number",label:"Age",name:"age",error:f.age}),Object(_.jsx)(ie,{id:"zip",type:"number",label:"Your ZIP(must be in Berlin)",name:"zip"}),Object(_.jsx)(ge,{label:"Your native language",name:"nativeLanguage",options:p,error:f.nativeLanguage}),Object(_.jsx)(ge,{label:"Language you want to practice",name:"practiceLanguage",options:p,error:f.practiceLanguage}),Object(_.jsx)(ie,{id:"about",type:"text",label:"Short infomation",name:"about",className:"two-columns"}),Object(_.jsx)(de,{label:"Interests",id:"interests",name:"interests",error:f.interests,className:"two-columns"}),Object(_.jsx)(de,{label:"About yourself",id:"description",name:"description",error:f.description,className:"two-columns"}),Object(_.jsx)("input",{className:"btn-submit",type:"submit"})]})]})}),Object(_.jsxs)("div",{id:"box-profile-avatar",children:[b?Object(_.jsx)("div",{id:"profile-avatar",style:{background:"url(".concat(b,") no-repeat center"),backgroundSize:"cover"},alt:"avatar"}):Object(_.jsx)("div",{id:"profile-avatar",style:{background:"url(".concat(r.img,") no-repeat center"),backgroundSize:"cover"},alt:"defaultAvatar"}),Object(_.jsx)("input",{id:"upload",type:"file",style:{display:"none"},onChange:function(e){return l(e.target.files[0])}}),Object(_.jsxs)("div",{id:"btns-upload",children:[Object(_.jsx)("input",{id:"btn-upload",value:"browse...",type:"button",onClick:function(){return document.getElementById("upload").click()},name:"img"}),Object(_.jsx)("button",{id:"btn-setAvatar",onClick:m,children:"change avatar"})]})]})]})}),ye=function(){window.location.reload(!1)},we=function(){var e=N(),t=Object(A.b)(),r=Object(A.c)(q),a=Q(r,e);return Object(n.useEffect)((function(){a||t(D())}),[t,a]),Object(_.jsx)(_.Fragment,{children:a&&Object(_.jsx)(Ne,{currentUser:a})})},ke=(r(106),r.p+"static/media/envelope.d3049b2d.svg"),Le=r.p+"static/media/user (2).be851f03.svg",Ue=r.p+"static/media/star.3867327e.svg",Se=function(){var e=N();return Object(_.jsx)("div",{id:"menu-left",children:Object(_.jsxs)("ul",{className:"nav-left",children:[Object(_.jsx)(i.b,{to:"/user/".concat(e,"/me/profile"),className:"no-decoration",children:Object(_.jsxs)("li",{className:"nav-left-li",children:[Object(_.jsx)("img",{id:"svg-img",src:Le,alt:"img"}),"Profile"]})}),Object(_.jsx)(i.b,{to:"/user/".concat(e,"/me/messages"),className:"no-decoration",children:Object(_.jsxs)("li",{className:"nav-left-li",children:[Object(_.jsx)("img",{id:"svg-img",src:ke,alt:"img"}),"Messages"]})}),Object(_.jsx)(i.b,{to:"/user/".concat(e,"/me/favourites"),className:"no-decoration",children:Object(_.jsxs)("li",{className:"nav-left-li",children:[Object(_.jsx)("img",{id:"svg-img",src:Ue,alt:"img"}),"Favourites"]})})]})})},Ve=(r(271),function(){var e=Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.get("/messages");case 3:return t=e.sent,e.abrupt("return",t.data);case 7:throw e.prev=7,e.t0=e.catch(0),new Error(e.t0.response.data.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}()),Ee=function(){var e=Object(u.a)(o.a.mark((function e(t){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.post("/messages",t);case 3:return r=e.sent,console.log(r.data),e.abrupt("return",r.data);case 8:throw e.prev=8,e.t0=e.catch(0),new Error(e.t0.response.data.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),ze=Object(g.b)({name:"messages",initialState:{messages:[]},reducers:{setMessages:function(e,t){var r=t.payload;e.messages=r.messages},addMessage:function(e,t){var r=t.payload;e.messages.push(r)}}}),Te=ze.reducer,Be=ze.actions,Fe=Be.setMessages,Re=Be.addMessage,Me=function(e){return e.messages.messages},Ge=function(){return function(){var e=Object(u.a)(o.a.mark((function e(t){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(L()),e.prev=1,e.next=4,Ve();case 4:r=e.sent,t(Fe({messages:r})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0.message);case 11:return e.prev=11,t(U()),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[1,8,11,14]])})));return function(t){return e.apply(this,arguments)}}()},We=function(e){return function(){var t=Object(u.a)(o.a.mark((function t(r){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r(L()),t.prev=1,t.next=4,Ee(e);case 4:n=t.sent,r(Re(Object(T.a)({},n))),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.log(t.t0.message);case 11:return t.prev=11,r(U()),t.finish(11);case 14:case"end":return t.stop()}}),t,null,[[1,8,11,14]])})));return function(e){return t.apply(this,arguments)}}()},Ke=function(e){var t=e.messages,r=e.currentUserId,n=e.id,a=t.filter((function(e){return e.sentBy===n&&e.recipient===r||e.sentBy===r&&e.recipient===n}));return console.log("messages:",t),Object(_.jsx)("div",{children:a.map((function(e,t){var n=e.createdAt.split("T")[0],a=e.createdAt.split("T")[1],s=n.split("-")[2]+"."+n.split("-")[1],c=a.split(":")[0]+":"+a.split(":")[1];return e.sentBy===r?Object(_.jsxs)("div",{className:"right",children:[e.text,Object(_.jsx)("p",{id:"sign",children:"me"}),Object(_.jsxs)("p",{className:"dateAnDTimeRight",children:[s,"   ",c]})]},t):Object(_.jsxs)("div",{className:"left",children:[e.text,Object(_.jsxs)("p",{className:"dateAnDTimeLeft",children:[s,"   ",c]})]},t)}))})},Ze=function(){var e=Object(A.c)(q),t=Object(A.b)();Object(n.useEffect)((function(){t(D())}),[t]);var r=Object(A.c)(Me);Object(n.useEffect)((function(){var e=setInterval((function(){t(Ge())}),5e3);return function(){clearInterval(e),!1}}));var a=Object(ee.g)(),s=N(),c=Object(ee.h)().id,i=Q(e,c),g=Object(ne.b)({defaultValues:{text:""},onSubmit:function(e,r){var n=r.reset,a=Object(T.a)(Object(T.a)({},e),{},{sentBy:s,recipient:c});console.log("onSubmit: ",a),t(We(a)),n()}}).form;return Object(_.jsxs)("div",{className:"wrapper-msg",children:[Object(_.jsxs)("div",{className:"wrapper-msg-left",children:[Object(_.jsx)("div",{id:"box-top-msgs",children:0!==r.length&&Object(_.jsx)(Ke,{messages:r,currentUserId:s,id:c})}),Object(_.jsx)("div",{id:"box-bottom-input",children:Object(_.jsxs)("form",{id:"box-bottom-form",ref:g,children:[Object(_.jsxs)("div",{id:"box-bottom-message",children:[Object(_.jsx)("textarea",{id:"textarea-msg",name:"text",placeholder:"Write your message"}),Object(_.jsx)("br",{})]}),Object(_.jsx)("button",{id:"btn-send",type:"submit",children:"Send"})]})})]}),0!==e.length&&Object(_.jsx)("div",{className:"wrapper-msg-right",children:Object(_.jsxs)("div",{id:"box-right",children:[Object(_.jsx)("div",{id:"box-right-top",children:Object(_.jsx)("div",{id:"box-right-img",style:{background:"url(".concat(i.img,") no-repeat center"),backgroundSize:"cover"}})}),Object(_.jsxs)("div",{id:"box-right-bottom",children:[Object(_.jsxs)("div",{id:"box-right-bottom-info",children:[Object(_.jsxs)("h4",{id:"text-user-name",children:[i.firstName," ",i.lastName]}),Object(_.jsx)("p",{className:"text-user",id:"text-user-about",children:"Some user\xb4s information"}),Object(_.jsx)("br",{}),Object(_.jsxs)("p",{className:"text-user",id:"text-user-learn",children:["Learn: ",i.practiceLanguage]}),Object(_.jsxs)("p",{className:"text-user",id:"text-user-native",children:["Native: ",i.nativeLanguage]})]}),Object(_.jsx)("div",{id:"box-right-bottom-btn",children:Object(_.jsx)("button",{className:"right-bottom-btn",id:"btn-view-profile",onClick:function(){return a("/users/".concat(i._id))},children:"view profile"})})]})]})})]})},Xe=r(10),Ye=(r(272),r(273),function(e){var t=e.user,r=e.messages,a=e.currentUserId,s=Object(A.b)();Object(n.useEffect)((function(){s(Ge())}),[s]);var c=r.filter((function(e){return e.sentBy===t._id&&e.recipient===a||e.sentBy===a&&e.recipient===t._id})),i=c[c.length-1];return Object(_.jsxs)("div",{className:"box-message",children:[Object(_.jsx)("div",{className:"",children:Object(_.jsx)("div",{className:"avatar",style:{background:"url(".concat(t.img,") no-repeat center"),backgroundSize:"cover"}})}),Object(_.jsxs)("h3",{className:"msg-sentBy",children:[t.firstName," ",t.lastName]}),i?Object(_.jsx)("p",{id:"msg-text",children:i.text}):Object(_.jsx)("div",{})]})}),qe=function(){var e=Object(A.b)();Object(n.useEffect)((function(){e(Ge())}),[e]),Object(n.useEffect)((function(){e(D())}),[e]);var t=Object(A.c)(Me),r=N(),a=Object(A.c)(q),s=function(e,t){var r=[];return null!==e&&(r=t.filter((function(t){return t.recipient===e}))),r}(r,t),c=function(e,t){var r=[];return null!==e&&(r=t.filter((function(t){return t.sentBy===e}))),r}(r,t),g=s.filter((function(e,t,r){return r.findIndex((function(t){return t.sentBy===e.sentBy}))===t})),l=c.filter((function(e,t,r){return r.findIndex((function(t){return t.recipient===e.recipient}))===t}));g.push.apply(g,Object(Xe.a)(l));var o=g.map((function(e){return e.sentBy===r?e.recipient:e.sentBy})).filter((function(e,t,r){return r.indexOf(e)===t}));var u=function(){for(var e=[],t=0;t<o.length;t++){var r=Q(a,o[t]);e.push(r)}return e}();return Object(_.jsx)("div",{children:Object(_.jsx)("div",{className:"wrapper-allUsers",children:Object(_.jsx)("div",{className:"allUsers",children:0===t.length||0===a.length?Object(_.jsx)("div",{}):Object(_.jsx)("div",{children:u.map((function(e){return Object(_.jsx)(i.b,{id:"box-msg",to:"/user/".concat(r,"/me/messages/").concat(e._id),children:Object(_.jsx)(Ye,{user:e,users:a,messages:t,currentUserId:r},e._id)},e._id)}))})})})})},Je=(r(274),r(275),function(e){var t=e.user;return Object(_.jsxs)("div",{id:"user-fav-box",children:[Object(_.jsx)("div",{id:"user-fav-img",style:{background:"url(".concat("http://localhost:8080/images/"+t.img,") no-repeat center"),backgroundSize:"cover"}}),Object(_.jsx)("div",{id:"user-fav-info",children:Object(_.jsxs)("div",{id:"user-fav-mainInfo",children:[Object(_.jsxs)("h4",{className:"user-fav-name",children:[t.firstName," ",t.lastName]}),Object(_.jsx)("p",{className:"user-fav-card-text",children:"Native: "}),Object(_.jsx)("p",{className:"user-fav-card-text",children:t.nativeLanguage}),Object(_.jsx)("p",{className:"user-card-text",children:" | "}),Object(_.jsx)("p",{className:"user-fav-card-text",children:"Practice: "}),Object(_.jsx)("p",{className:"user-fav-card-text",children:t.practiceLanguage}),Object(_.jsx)("br",{}),Object(_.jsx)("br",{})]})})]})}),Pe=function(e){var t=e.users,r=N(),n=Q(t,r),a=n.favourites;console.log("currentUser: ",n);var s=function(){for(var e=[],r=function(r){var n=t.find((function(e){return e._id===a[r]}));e.push(n)},n=0;n<a.length;n++)r(n);return e}();return Object(_.jsx)("div",{id:"wrapper-favourites",children:s.map((function(e){return Object(_.jsx)(i.b,{id:"box-fav",to:"/users/".concat(e._id),children:Object(_.jsx)(Je,{user:e},e._id)},e._id)}))})},De=function(){var e=Object(A.b)(),t=Object(A.c)(q);return Object(n.useEffect)((function(){t||e(D())}),[e,t]),Object(_.jsx)("div",{children:t.length&&Object(_.jsx)(Pe,{users:t})})},He=function(){var e=Object(A.c)(q);Object(A.c)(E);return Object(_.jsxs)("div",{children:[Object(_.jsx)(Se,{}),0===e.length&&Object(_.jsx)(Oe,{}),Object(_.jsxs)(ee.d,{children:[Object(_.jsx)(ee.b,{path:"profile",element:Object(_.jsx)(we,{})}),Object(_.jsx)(ee.b,{path:"messages/*",element:Object(_.jsx)(qe,{})}),Object(_.jsx)(ee.b,{path:"messages/:id/*",element:Object(_.jsx)(Ze,{})}),Object(_.jsx)(ee.b,{path:"favourites",element:Object(_.jsx)(De,{})})]})]})},Qe=(r(276),r(62)),_e=r.n(Qe),$e=function(){var e=Object(A.b)(),t=Object(A.c)(z),r=Object(ee.g)();e(S()),Object(n.useEffect)((function(){e(D())}),[e]);var a=Object(ee.h)().id,s=Object(A.c)(q),c=N(),i=Q(s,c),g=Q(s,a),l=Object(ne.b)({defaultValues:{text:""},onSubmit:function(t,r){var n=r.reset,s=Object(T.a)(Object(T.a)({},t),{},{sentBy:c,recipient:a});console.log("onSubmit: ",s),e(We(s)),n()}}).form;_e.a.setAppElement(document.getElementById("root"));var d=Object(n.useState)(!1),j=Object(te.a)(d,2),b=j[0],C=j[1];function I(){C(!1)}function m(){var t,r=Object.assign([],i.favourites);t=r.includes(g._id),console.log("isDouble:",t),t||(r.push(g._id),e(function(e,t){return function(){var r=Object(u.a)(o.a.mark((function r(n){return o.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n(X({error:null})),n(L()),r.prev=2,r.next=5,R(e,{favourites:t});case 5:r.next=10;break;case 7:r.prev=7,r.t0=r.catch(2),n(X({error:r.t0.message}));case 10:return r.prev=10,n(U()),r.finish(10);case 13:case"end":return r.stop()}}),r,null,[[2,7,10,13]])})));return function(e){return r.apply(this,arguments)}}()}(c,r)))}return Object(_.jsx)(_.Fragment,{children:0!==s.length&&Object(_.jsxs)("div",{id:"wrapper-userView",children:[Object(_.jsxs)("div",{className:"box",id:"box-left",children:[Object(_.jsx)("div",{id:"box-left-top"}),Object(_.jsx)("div",{id:"box-left-img",style:{background:"url(".concat(g.img,") no-repeat center"),backgroundSize:"100%"}}),Object(_.jsxs)("div",{id:"box-left-bottom",children:[Object(_.jsxs)("div",{id:"box-left-bottom-info",children:[Object(_.jsxs)("h4",{id:"text-user-name",children:[g.firstName," ",g.lastName]}),Object(_.jsx)("p",{className:"text-user",id:"text-user-about",children:g.about}),Object(_.jsx)("br",{}),Object(_.jsxs)("p",{className:"text-user",id:"text-user-learn",children:["Learn: ",g.practiceLanguage]}),Object(_.jsxs)("p",{className:"text-user",id:"text-user-native",children:["Native: ",g.nativeLanguage]})]}),t?Object(_.jsxs)("div",{id:"box-left-bottom-btns",children:[Object(_.jsx)("button",{className:"left-bottom-btns",id:"btn-add",onClick:function(){return m()},children:"add to favourites"}),Object(_.jsx)("button",{onClick:function(){C(!0)},className:"left-bottom-btns",id:"btn-contact",children:"send message"}),Object(_.jsxs)(_e.a,{isOpen:b,onRequestClose:I,style:{content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",width:"400px",height:"200px"}},contentLabel:"Example Modal",children:[Object(_.jsx)("button",{id:"modal-btn-close",onClick:I,children:"X"}),Object(_.jsx)("div",{id:"modal-title",children:"Write your message:"}),Object(_.jsxs)("form",{ref:l,noValidate:!0,children:[Object(_.jsx)("textarea",{id:"modal-text",name:"text"}),Object(_.jsx)("input",{id:"modal-btn-submit",type:"submit"})]})]})]}):Object(_.jsxs)("div",{id:"box-left-bottom-btns",children:[Object(_.jsx)("p",{className:"text-user p-bottom",children:"Please login or register to contact a person"}),Object(_.jsx)("button",{onClick:function(){return r("/auth/login")},className:"left-bottom-btns",id:"btn-contact",children:"login"})]})]})]}),Object(_.jsx)("div",{className:"box",id:"box-right",children:Object(_.jsxs)("div",{id:"box-right-content",children:[Object(_.jsx)("div",{children:Object(_.jsx)("h4",{children:"User Profile"})}),Object(_.jsxs)("div",{id:"box-right-firstName",className:"box-right-style",children:[Object(_.jsx)("p",{className:"profile-text-styled",children:"First name:"}),Object(_.jsx)("p",{className:"profile-text-styled",children:g.firstName})]}),Object(_.jsxs)("div",{id:"box-right-lastName",className:"box-right-style",children:[Object(_.jsx)("p",{className:"profile-text-styled",children:"Last name:"}),Object(_.jsx)("p",{className:"profile-text-styled",children:g.lastName})]}),Object(_.jsxs)("div",{id:"box-right-bdate",className:"box-right-style",children:[Object(_.jsx)("p",{className:"profile-text-styled",children:"Age:"}),Object(_.jsx)("p",{className:"profile-text-styled",children:g.age})]}),Object(_.jsxs)("div",{id:"box-right-address",className:"box-right-style",children:[Object(_.jsx)("p",{className:"profile-text-styled",children:"Address:"}),Object(_.jsxs)("p",{className:"profile-text-styled",children:["Berlin, ",g.zip]})]}),Object(_.jsxs)("div",{id:"box-right-interests",className:"box-right-style",children:[Object(_.jsx)("p",{className:"profile-text-styled",children:"Interests:"}),Object(_.jsx)("p",{className:"profile-text-styled",children:g.interests})]}),Object(_.jsxs)("div",{id:"box-right-aboutme",className:"box-right-style",children:[Object(_.jsx)("p",{className:"profile-text-styled",children:"About me:"}),Object(_.jsx)("p",{className:"profile-text-styled",children:g.description})]})]})}),Object(_.jsx)("div",{className:"box",id:"box-3"})]})})},et=function(){var e=Object(ee.h)(),t=e.native,r=e.practice,a=Object(A.b)(),s=N(),c=Object(A.c)(E);Object(n.useEffect)((function(){a(D())}),[a]);var g=Object(A.c)(q);console.log("native",t),console.log("practice",r);var l=g.filter((function(e){return e.nativeLanguage===t})).filter((function(e){return e.practiceLanguage===r}));return console.log("usersAfterFilterByTwolanguages: ",l),Object(_.jsx)("div",{children:c?Object(_.jsx)(Oe,{}):Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(xe,{}),Object(_.jsx)("div",{id:"wrapper-users",children:l.map((function(e){if(s!==e._id)return Object(_.jsx)(i.b,{id:"box",to:"/users/".concat(e._id),children:Object(_.jsx)(pe,{user:e},e._id)},e._id)}))})]})})},tt=function(){var e=Object(ee.h)().native,t=Object(A.b)(),r=N(),a=Object(A.c)(E);Object(n.useEffect)((function(){t(D())}),[t]);var s=Object(A.c)(q).filter((function(t){return t.nativeLanguage===e}));return console.log("usersAfterFilter by Native language: ",s),Object(_.jsx)("div",{children:a?Object(_.jsx)(Oe,{}):Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(xe,{}),Object(_.jsx)("div",{id:"wrapper-users",children:s.map((function(e){if(r!==e._id)return Object(_.jsx)(i.b,{id:"box",to:"/users/".concat(e._id),children:Object(_.jsx)(pe,{user:e},e._id)},e._id)}))})]})})},rt=function(){var e=Object(ee.h)().practice,t=Object(A.b)(),r=N(),a=Object(A.c)(E);Object(n.useEffect)((function(){t(D())}),[t]);var s=Object(A.c)(q).filter((function(t){return t.practiceLanguage===e}));return console.log("usersAfterFilter by Practice language: ",s),Object(_.jsx)("div",{children:a?Object(_.jsx)(Oe,{}):Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(xe,{}),Object(_.jsx)("div",{id:"wrapper-users",children:s.map((function(e){if(r!==e._id)return Object(_.jsx)(i.b,{id:"box",to:"/users/".concat(e._id),children:Object(_.jsx)(pe,{user:e},e._id)},e._id)}))})]})})};var nt=function(){var e=Object(A.c)(E);return Object(A.b)()(S()),console.log("isloading: ",e),Object(_.jsxs)("div",{children:[Object(_.jsx)($,{}),Object(_.jsxs)(ee.d,{children:[Object(_.jsx)(ee.b,{path:"/",element:Object(_.jsx)(me,{})}),Object(_.jsx)(ee.b,{path:"auth/login",element:Object(_.jsx)(Ce,{})}),Object(_.jsx)(ee.b,{path:"auth/signup",element:Object(_.jsx)(je,{})}),Object(_.jsx)(ee.b,{path:"users/*",element:Object(_.jsx)(ve,{})}),Object(_.jsx)(ee.b,{path:"users/:id",element:Object(_.jsx)($e,{})}),Object(_.jsx)(ee.b,{path:"blog",element:Object(_.jsx)(fe,{})}),Object(_.jsx)(ee.b,{path:"user/:id/*",element:Object(_.jsx)(he,{})}),Object(_.jsx)(ee.b,{path:"user/:id/me/*",element:Object(_.jsx)(He,{})}),Object(_.jsx)(ee.b,{path:"/users/native=:native/practice=:practice",element:Object(_.jsx)(et,{})}),Object(_.jsx)(ee.b,{path:"/users/native=:native",element:Object(_.jsx)(tt,{})}),Object(_.jsx)(ee.b,{path:"/users/practice=:practice",element:Object(_.jsx)(rt,{})})]})]})},at=r(16),st=Object(g.b)({name:"img",initialState:{avatar:null,images:null},reducers:{setAvatar:function(e,t){var r=t.payload;e.avatar=r.avatar},addImg:function(e,t){var r=t.payload;e.images.push(r)}}}),ct=st.reducer,it=st.actions,At=(it.setAvatar,it.addImg,it.setError,Object(at.b)({user:G,app:w,messages:Te,auth:p,img:ct})),gt=Object(g.a)({reducer:At});c.a.render(Object(_.jsx)(a.a.StrictMode,{children:Object(_.jsx)(A.a,{store:gt,children:Object(_.jsx)(i.a,{children:Object(_.jsx)(nt,{})})})}),document.getElementById("root"))},34:function(e,t,r){},63:function(e,t,r){}},[[286,1,2]]]);
//# sourceMappingURL=main.18b6f007.chunk.js.map